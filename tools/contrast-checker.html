<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WCAG Contrast Checker with Color Suggestions & Eyedropper | toolsTree</title>
    <meta name="description" content="The ultimate WCAG 2.1 Contrast Checker. Analyze color pairs against AA/AAA standards, get smart color suggestions to fix contrast issues, and use the eyedropper to pick colors from anywhere on your screen.">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N1KEVGM2VP"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-N1KEVGM2VP');
    </script>
    <script>
    (function() {
        try {
            const theme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            // Apply 'dark' class if saved theme is 'dark' OR if there's no saved theme and OS prefers dark.
            if (theme === 'dark' || (!theme && prefersDark)) {
            document.documentElement.classList.add('dark');
            } else {
            document.documentElement.classList.remove('dark');
            }
        } catch (e) {
            // Failsafe: default to light mode if any errors occur.
            console.error("Error applying initial theme:", e);
            document.documentElement.classList.remove('dark');
        }
        })();
    </script>
    <link rel="canonical" href="https://toolstree.netlify.app/tools/contrast-checker.html">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;600;700&display=swap" rel="stylesheet">
    <script>
        window.GLOBAL_ROOT_PATH = '../';
        tailwind.config = { 
            darkMode: 'class', 
            theme: { 
                extend: { 
                    colors: { 'tt-primary': '#10b981', 'tt-secondary': '#4f46e5' }, 
                    fontFamily: { 
                        sans: ['Roboto Mono', 'monospace'] 
                    } 
                } 
            } 
        };
    </script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        :root { --tt-primary-stroke: #10b981; }
        .stroke-tt-primary { stroke: var(--tt-primary-stroke); }
        .dark input, .dark select { background-color: #374151; border-color: #4b5563; color: #f3f4f6; }
        .color-input-container input[type="color"]::-webkit-color-swatch { border: none; border-radius: 0.5rem; }
        .color-input-container input[type="color"]::-moz-color-swatch { border: none; border-radius: 0.5rem; }
    </style>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "WCAG Color Contrast Checker",
      "applicationCategory": "DesignApplication",
      "operatingSystem": "Web",
      "description": "The ultimate WCAG 2.1 Contrast Checker. Analyze color pairs against AA/AAA standards, get smart color suggestions to fix contrast issues, and use the eyedropper to pick colors from anywhere on your screen.",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.9",
        "reviewCount": "488"
      },
      "publisher": {
        "@type": "Organization",
        "name": "toolsTree"
      }
    }
    </script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 flex flex-col min-h-screen">

    <main class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 flex-grow w-full">
        <nav class="flex mb-6" aria-label="Breadcrumb">
            <ol class="inline-flex items-center space-x-1 md:space-x-3 text-sm">
                <li class="inline-flex items-center"><a href="../index.html" class="hover:text-tt-primary"><i data-lucide="home" class="w-4 h-4 mr-2 inline"></i>Home</a></li>
                <li><div class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 text-gray-400"></i><a href="../categories/image.html" class="ml-1 hover:text-tt-primary md:ml-2">Image & Design Tools</a></div></li>
                <li aria-current="page"><div class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 text-gray-400"></i><span class="ml-1 font-medium text-tt-primary md:ml-2">WCAG Color Contrast Checker</span></div></li>
            </ol>
        </nav>
        
        <section class="mb-10 text-center">
            <h1 class="text-3xl sm:text-4xl font-extrabold mb-3">WCAG Color Contrast Checker</h1>
            <p class="text-base text-gray-600 dark:text-gray-300">Ensure your color pairings meet accessibility standards with an eyedropper and smart suggestions.</p>
        </section>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2 bg-white dark:bg-gray-800 shadow-2xl rounded-xl p-6 sm:p-8 border border-gray-100 dark:border-gray-700 space-y-8">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-end">
                    <div class="space-y-2">
                        <label for="fgHex" class="block text-sm font-medium">Foreground Color</label>
                        <div class="flex items-center gap-2">
                            <input type="text" id="fgHex" value="#FFFFFF" class="w-full p-3 border rounded-lg font-mono text-center">
                            <div class="w-12 h-12 rounded-lg overflow-hidden border-2 dark:border-gray-600 color-input-container"><input type="color" id="fgColorPicker" value="#FFFFFF"></div>
                            <button id="fgEyedropper" class="p-3 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600" title="Pick color from screen"><i data-lucide="eyedropper"></i></button>
                        </div>
                    </div>
                    <div class="flex justify-center"><button id="swapColorsBtn" class="p-3 rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200" title="Swap Colors"><i data-lucide="arrow-up-down"></i></button></div>
                    <div class="space-y-2">
                        <label for="bgHex" class="block text-sm font-medium">Background Color</label>
                        <div class="flex items-center gap-2">
                            <input type="text" id="bgHex" value="#10B981" class="w-full p-3 border rounded-lg font-mono text-center">
                            <div class="w-12 h-12 rounded-lg overflow-hidden border-2 dark:border-gray-600 color-input-container"><input type="color" id="bgColorPicker" value="#10B981"></div>
                            <button id="bgEyedropper" class="p-3 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600" title="Pick color from screen"><i data-lucide="eyedropper"></i></button>
                        </div>
                    </div>
                </div>
                <div class="space-y-4">
                    <h3 class="text-lg font-semibold">Live Preview</h3>
                    <div id="previewCard" class="p-6 rounded-xl shadow-inner transition-colors duration-300">
                        <p class="text-base">This is normal text (16px). It must meet WCAG AA standards (4.5:1).</p>
                        <p class="text-2xl font-bold mt-4">This is large text (24px bold). It must meet WCAG AA standards (3.0:1).</p>
                    </div>
                </div>
            </div>

            <div class="space-y-6">
                <div class="bg-white p-6 rounded-xl shadow-2xl dark:bg-gray-800 border dark:border-gray-700 space-y-4">
                    <h3 class="text-xl font-bold flex items-center"><i data-lucide="eye" class="w-5 h-5 mr-2 stroke-tt-secondary"></i>Contrast Analysis</h3>
                    <div>
                        <span class="text-sm font-medium text-gray-500">Contrast Ratio</span>
                        <p id="ratioDisplay" class="text-4xl font-extrabold text-tt-primary mt-1"></p>
                    </div>
                    <div id="overallStatus" class="px-3 py-1 rounded-full text-center text-sm font-semibold"></div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-2xl dark:bg-gray-800 border dark:border-gray-700 space-y-4">
                    <h3 class="text-lg font-bold">WCAG 2.1 Compliance</h3>
                    <div class="space-y-3">
                        <div class="p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50">
                            <p class="font-semibold mb-1">Normal Text</p>
                            <div class="flex justify-between items-center text-sm"><span>AA (4.5:1)</span><span id="normalTextAA" class="font-bold"></span></div>
                            <div class="flex justify-between items-center text-sm"><span>AAA (7:1)</span><span id="normalTextAAA" class="font-bold"></span></div>
                        </div>
                        <div class="p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50">
                            <p class="font-semibold mb-1">Large Text</p>
                            <div class="flex justify-between items-center text-sm"><span>AA (3:1)</span><span id="largeTextAA" class="font-bold"></span></div>
                            <div class="flex justify-between items-center text-sm"><span>AAA (4.5:1)</span><span id="largeTextAAA" class="font-bold"></span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <section class="mt-8 bg-white p-6 rounded-xl shadow-lg dark:bg-gray-800 border border-gray-100 dark:border-gray-700 space-y-6">
             <div>
                <h2 class="text-2xl font-bold mb-3 border-b pb-2 dark:border-gray-700">Understanding Accessibility</h2>
                <p class="text-sm text-gray-600 mb-4 dark:text-gray-300">Web Content Accessibility Guidelines (WCAG) are standards that ensure digital content is usable by everyone, including people with disabilities. Color contrast is critical for users with low vision. This tool helps you meet those standards effortlessly.</p>
            </div>
             <div>
                <h2 class="text-2xl font-bold mb-3 border-b pb-2 dark:border-gray-700">Frequently Asked Questions</h2>
                <div class="space-y-3 text-sm">
                    <details class="group"><summary class="flex justify-between items-center font-medium cursor-pointer p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700"><span>What is the difference between AA and AAA?</span><span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span></summary><p class="text-gray-600 mt-2 p-2 dark:text-gray-300">WCAG has two main levels of compliance. <strong>AA</strong> is the widely accepted standard that most websites aim for. <strong>AAA</strong> is a stricter standard (requiring a higher contrast ratio) that is often required for sites dedicated to audiences with visual impairments. Meeting AA is essential; meeting AAA is excellent.</p></details>
                    <details class="group"><summary class="flex justify-between items-center font-medium cursor-pointer p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700"><span>How does the Eyedropper tool work?</span><span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span></summary><p class="text-gray-600 mt-2 p-2 dark:text-gray-300">The Eyedropper uses a modern browser API that allows you to pick a color from anywhere on your screen. When you click the eyedropper icon, your cursor will change, and you can then click on any color to instantly load it into the calculator. Note: This feature is only available on supported desktop browsers like Chrome, Edge, and Opera.</p></details>
                </div>
            </div>
        </section>
    </main>
    
    <script src="../javascript/globals.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        if (typeof window.injectLayout === 'function') {
            window.injectLayout(false);
        } else {
            console.warn('`injectLayout` function not found. Header/footer will not be injected.');
        }

        const ui = {
            fgHex: document.getElementById('fgHex'), bgHex: document.getElementById('bgHex'),
            fgPicker: document.getElementById('fgColorPicker'), bgPicker: document.getElementById('bgColorPicker'),
            fgEyedropper: document.getElementById('fgEyedropper'), bgEyedropper: document.getElementById('bgEyedropper'),
            swapBtn: document.getElementById('swapColorsBtn'), previewCard: document.getElementById('previewCard'),
            ratioDisplay: document.getElementById('ratioDisplay'), overallStatus: document.getElementById('overallStatus'),
            compliance: {
                normalAA: document.getElementById('normalTextAA'), normalAAA: document.getElementById('normalTextAAA'),
                largeAA: document.getElementById('largeTextAA'), largeAAA: document.getElementById('largeTextAAA')
            }
        };
        
        const hexToRgb = (hex) => {
            hex = hex.replace(/^#/, '');
            if (hex.length === 3) hex = hex.split('').map(c => c + c).join('');
            if (hex.length !== 6) return null;
            const num = parseInt(hex, 16);
            return { r: (num >> 16) & 255, g: (num >> 8) & 255, b: num & 255 };
        };

        const rgbToHex = (r, g, b) => '#' + [r, g, b].map(x => Math.round(x).toString(16).padStart(2, '0')).join('');

        const rgbToHsl = (r, g, b) => {
            r /= 255; g /= 255; b /= 255;
            const max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;
            if (max === min) { h = s = 0; } 
            else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }
            return { h, s, l };
        };

        const hslToRgb = (h, s, l) => {
            let r, g, b;
            if (s === 0) { r = g = b = l; } 
            else {
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1/6) return p + (q - p) * 6 * t;
                    if (t < 1/2) return q;
                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                    return p;
                };
                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                r = hue2rgb(p, q, h + 1/3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1/3);
            }
            return { r: r * 255, g: g * 255, b: b * 255 };
        };

        const getLuminance = (rgb) => {
            const [r, g, b] = Object.values(rgb).map(c => {
                c /= 255;
                return c <= 0.04045 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
            });
            return 0.2126 * r + 0.7152 * g + 0.0722 * b;
        };
        
        const getContrast = (lum1, lum2) => (Math.max(lum1, lum2) + 0.05) / (Math.min(lum1, lum2) + 0.05);

        const updateUI = () => {
            const fgHex = ui.fgHex.value, bgHex = ui.bgHex.value;
            const fgRgb = hexToRgb(fgHex), bgRgb = hexToRgb(bgHex);
            if (!fgRgb || !bgRgb) { return; }

            ui.previewCard.style.backgroundColor = bgHex; ui.previewCard.style.color = fgHex;
            if(document.activeElement !== ui.fgPicker) ui.fgPicker.value = fgHex;
            if(document.activeElement !== ui.bgPicker) ui.bgPicker.value = bgHex;

            const fgLum = getLuminance(fgRgb), bgLum = getLuminance(bgRgb);
            const ratio = getContrast(fgLum, bgLum);
            ui.ratioDisplay.textContent = ratio.toFixed(2) + ':1';
            
            updateCompliance('normalAA', ratio, 4.5); updateCompliance('normalAAA', ratio, 7.0);
            updateCompliance('largeAA', ratio, 3.0); updateCompliance('largeAAA', ratio, 4.5);

            let statusText = 'Fail'; let statusClasses = 'bg-red-100 text-red-700 dark:bg-red-900/50';
            if (ratio >= 7.0) { statusText = 'Very High (AAA)'; statusClasses = 'bg-tt-primary/10 text-tt-primary'; }
            else if (ratio >= 4.5) { statusText = 'Good (AA)'; statusClasses = 'bg-green-100 text-green-700 dark:bg-green-900/50'; }
            else if (ratio >= 3.0) { statusText = 'Passable (AA Large)'; statusClasses = 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/50'; }
            ui.overallStatus.textContent = statusText;
            ui.overallStatus.className = `px-3 py-1 rounded-full text-center text-sm font-semibold ${statusClasses}`;
        };

        const updateCompliance = (id, ratio, requirement) => {
            const el = ui.compliance[id.replace('Text', '')];
            const isPassing = ratio >= requirement;
            el.textContent = isPassing ? 'PASS' : 'FAIL';
            el.className = `font-bold ${isPassing ? 'text-green-500' : 'text-red-500'}`;
            
            const existingBtn = el.nextElementSibling;
            if (existingBtn && existingBtn.tagName === 'BUTTON') existingBtn.remove();
            
            if (!isPassing) {
                const fixBtn = document.createElement('button');
                fixBtn.textContent = 'Fix';
                fixBtn.className = 'ml-2 text-xs bg-gray-200 dark:bg-gray-600 px-1 rounded hover:bg-tt-primary hover:text-white';
                fixBtn.onclick = () => suggestColor(requirement);
                el.insertAdjacentElement('afterend', fixBtn);
            }
        };

        const suggestColor = (targetRatio) => {
            const fgRgb = hexToRgb(ui.fgHex.value); const bgRgb = hexToRgb(ui.bgHex.value);
            if (!fgRgb || !bgRgb) return;
            const fgLum = getLuminance(fgRgb); const bgLum = getLuminance(bgRgb);

            const colorToChange = (Math.abs(fgLum - 0.5) < Math.abs(bgLum - 0.5)) ? 'fg' : 'bg';
            
            let colorToAdjust = (colorToChange === 'fg') ? fgRgb : bgRgb;
            let fixedColor = (colorToChange === 'fg') ? bgRgb : fgRgb;
            const fixedLum = getLuminance(fixedColor);
            
            let hsl = rgbToHsl(colorToAdjust.r, colorToAdjust.g, colorToAdjust.b);
            
            const needsLightening = fixedLum < 0.5;
            
            const step = needsLightening ? 0.01 : -0.01;
            
            for (let i = 0; i < 100; i++) {
                hsl.l += step;

                if (hsl.l < 0 || hsl.l > 1) {
                    hsl.l = Math.max(0, Math.min(1, hsl.l));
                    break;
                }

                let testRgb = hslToRgb(hsl.h, hsl.s, hsl.l);
                if (getContrast(getLuminance(testRgb), fixedLum) >= targetRatio) {
                    break;
                }
            }

            const finalRgb = hslToRgb(hsl.h, hsl.s, hsl.l);
            const newHex = rgbToHex(finalRgb.r, finalRgb.g, finalRgb.b);

            if (colorToChange === 'fg') {
                ui.fgHex.value = newHex;
            } else {
                ui.bgHex.value = newHex;
            }
            updateUI();
        };
        
        const openEyedropper = async (target) => {
            if (!window.EyeDropper) { alert("Eyedropper API is not supported in your browser."); return; }
            try {
                const result = await new EyeDropper().open();
                target.value = result.sRGBHex.toUpperCase();
                updateUI();
            } catch (e) { console.info("Eyedropper aborted."); }
        };

        [ui.fgHex, ui.bgHex].forEach(el => el.addEventListener('input', updateUI));
        ui.fgPicker.addEventListener('input', () => { ui.fgHex.value = ui.fgPicker.value.toUpperCase(); updateUI(); });
        ui.bgPicker.addEventListener('input', () => { ui.bgHex.value = ui.bgPicker.value.toUpperCase(); updateUI(); });
        ui.swapBtn.addEventListener('click', () => { [ui.fgHex.value, ui.bgHex.value] = [ui.bgHex.value, ui.fgHex.value]; updateUI(); });
        ui.fgEyedropper.addEventListener('click', () => openEyedropper(ui.fgHex));
        ui.bgEyedropper.addEventListener('click', () => openEyedropper(ui.bgHex));
        
        updateUI();
    });
    </script>
</body>
</html>
