<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced CSS Gradient Generator | toolsTree</title>
    <meta name="description" content="Visually create stunning linear and radial CSS gradients. Customize colors, angles, and export the code instantly for your projects.">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="canonical" href="https://toolstree.vercel.app/tools/css-gradient-generator.html">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="../assets/output.css" rel="stylesheet">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N1KEVGM2VP"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-N1KEVGM2VP');
    </script>
    <script>
        (function() {
        try {
            const theme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            // Apply 'dark' class if saved theme is 'dark' OR if there's no saved theme and OS prefers dark.
            if (theme === 'dark' || (!theme && prefersDark)) {
            document.documentElement.classList.add('dark');
            } else {
            document.documentElement.classList.remove('dark');
            }
        } catch (e) {
            // Failsafe: default to light mode if any errors occur.
            console.error("Error applying initial theme:", e);
            document.documentElement.classList.remove('dark');
        }
        })();
    </script>
    <script>
        window.GLOBAL_ROOT_PATH = '../';
    </script>
    <script src="https://unpkg.com/lucide@latest" defer></script>
    <style>
        :root { --tt-primary-stroke: #10b981; }
        .stroke-tt-primary { stroke: var(--tt-primary-stroke); }
        .dark input, .dark select { background-color: #374151; border-color: #4b5563; color: #f3f4f6; }
        input[type="color"] { padding: 0; border: none; width: 40px; height: 40px; border-radius: 0.375rem; cursor: pointer; }
        input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
        input[type="color"]::-webkit-color-swatch { border: none; border-radius: 0.375rem; }
        .angle-dial { position: relative; width: 80px; height: 80px; }
        .angle-dial-center { position: absolute; top: 50%; left: 50%; width: 10px; height: 10px; background: #fff; border-radius: 50%; transform: translate(-50%, -50%); border: 1px solid #ccc; }
        .angle-dial-handle { position: absolute; top: 50%; left: 50%; width: 12px; height: 12px; background: var(--tt-primary-stroke); border-radius: 50%; transform: translate(-50%, -50%); cursor: pointer; }
        .type-btn.active {
            background-color: var(--tt-primary-stroke);
            color: white;
            border-color: var(--tt-primary-stroke);
        }
    </style>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Advanced CSS Gradient Generator",
      "applicationCategory": "DeveloperApplication",
      "operatingSystem": "Web",
      "description": "Visually create and customize complex linear and radial CSS gradients, and export the code instantly for web development and design projects.",
      "offers": {"@type": "Offer", "price": "0", "priceCurrency": "USD"},
      "aggregateRating": {"@type": "AggregateRating", "ratingValue": "4.9", "reviewCount": "680"},
      "publisher": {"@type": "Organization", "name": "toolsTree"}
    }
    </script>
    <script type="application/ld+json">
        {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
            "@type": "Question",
            "name": "How can I make a smoother gradient?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "For a smoother transition, choose colors that are closer to each other in hue and brightness. You can also add intermediate color stops between your main colors to create a more gradual change."
            }
            },
            {
            "@type": "Question",
            "name": "What browsers support CSS gradients?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "CSS gradients are widely supported by all modern web browsers, including Chrome, Firefox, Safari, and Edge. The code generated by this tool is standard and does not require vendor prefixes for current browser versions."
            }
            },
            {
            "@type": "Question",
            "name": "What's the difference between Linear and Radial?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "A Linear gradient proceeds in a straight line, defined by an angle (e.g., 180deg is top-to-bottom). It's great for backgrounds. A Radial gradient starts from a single point and radiates outwards in a circle or ellipse, useful for spotlight effects."
            }
            },
            {
            "@type": "Question",
            "name": "How do I create 'hard stops' or stripes?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "To create a hard line instead of a smooth fade, set the position of two adjacent color stops to the exact same value using the sliders. For example, setting Color 1 to 50% and Color 2 to 50% will create an instant switch at the halfway mark."
            }
            },
            {
            "@type": "Question",
            "name": "Can I add more than two colors?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "Yes. This tool supports multi-color gradients. Just click the 'Add Color' button to add a new color stop. You can add as many as you need and use the position sliders to control where each color begins and ends."
            }
            }
        ]
        }
    </script>
    
</head>
<body class="bg-gray-50 dark:bg-black text-gray-800 dark:text-gray-100 flex flex-col min-h-screen font-sans">
    <main class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 flex-grow w-full">

        <nav class="flex mb-6" aria-label="Breadcrumb">
            <ol class="inline-flex items-center space-x-1 md:space-x-3 text-sm">
                <li class="inline-flex items-center"><a href="../index.html" class="hover:text-tt-primary"><i data-lucide="home" class="w-4 h-4 mr-2 inline"></i>Home</a></li>
                <li><div class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 text-gray-400"></i><a href="../categories/data-dev.html" class="ml-1 hover:text-tt-primary md:ml-2">Data & Developer Tools</a></div></li>
                <li aria-current="page"><div class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 text-gray-400"></i><span class="ml-1 font-medium text-tt-primary md:ml-2">Advanced CSS Gradient Generator</span></div></li>
            </ol>
        </nav>
        
        <section class="mb-10 text-center">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 dark:text-gray-100 mb-3">
                Advanced CSS Gradient Generator
            </h1>
            <p class="text-base text-gray-600 dark:text-gray-300">
                An interactive visual tool to build, customize, and export beautiful CSS gradients.
            </p>
        </section>

        <div class="bg-white dark:bg-gray-900 shadow-2xl rounded-xl border border-gray-100 dark:border-gray-800">
            <div class="grid grid-cols-1 lg:grid-cols-2">
                <div class="p-6 sm:p-8 border-b lg:border-r lg:border-b-0 border-gray-200 dark:border-gray-800">
                    <h2 class="text-xl font-bold mb-6">Controls</h2>
                    
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium mb-2">Gradient Type</label>
                            <div id="gradient-type" class="flex space-x-2">
                                <button data-type="linear" class="type-btn active flex-1 py-2 px-4 rounded-lg border">Linear</button>
                                <button data-type="radial" class="type-btn flex-1 py-2 px-4 rounded-lg border">Radial</button>
                            </div>
                        </div>

                        <div id="angle-control-wrapper">
                            <label class="block text-sm font-medium mb-2">Direction (Angle)</label>
                            <div class="flex items-center space-x-4">
                               <div class="angle-dial bg-gray-200 dark:bg-gray-700 rounded-full">
                                   <div class="angle-dial-center"></div>
                                   <div id="angle-handle" class="angle-dial-handle"></div>
                               </div>
                               <div class="relative">
                                    <input id="angle-input" type="number" min="0" max="360" value="90" class="w-24 p-2 border rounded-lg">
                                    <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400">deg</span>
                               </div>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Color Stops</label>
                            <div id="color-stops-container" class="space-y-3"></div>
                            <button id="add-color-btn" class="mt-4 w-full flex items-center justify-center space-x-2 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 font-semibold py-2 px-4 rounded-lg transition">
                                <i data-lucide="plus" class="w-4 h-4"></i>
                                <span>Add Color</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="p-6 sm:p-8">
                    <div class="flex justify-between items-center mb-6">
                       <h2 class="text-xl font-bold">Preview & Code</h2>
                       <button id="random-btn" class="flex items-center space-x-2 text-sm bg-tt-secondary text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-tt-secondary/90 transition">
                           <i data-lucide="shuffle" class="w-4 h-4"></i>
                           <span>Random</span>
                       </button>
                    </div>

                    <div id="preview-box" class="w-full h-64 rounded-xl border-2 border-dashed border-gray-300 dark:border-gray-600 mb-6 transition-all duration-300"></div>
                    
                    <div>
                        <div class="flex justify-between items-center mb-1">
                            <label for="css-code" class="block text-sm font-medium text-gray-700 dark:text-gray-300">CSS Code</label>
                            <div class="w-8 h-8">
                                <button id="copy-btn" title="Copy Code" class="p-2 rounded-md transition">
                                    <i data-lucide="copy" class="w-4 h-4 text-gray-500 dark:text-gray-400"></i>
                                </button>
                            </div>
                        </div>
                        <pre class="w-full p-4 border border-gray-300 rounded-lg bg-gray-50 dark:bg-gray-900/50 overflow-x-auto text-sm"><code id="css-code"></code></pre>
                        </div>
                </div>
            </div>
        </div>
        
        <section class="mt-8 bg-white p-6 rounded-xl shadow-lg dark:bg-gray-900 border border-gray-100 dark:border-gray-800 space-y-6">
            <div>
                <h2 class="text-2xl font-bold mb-3 text-gray-900 border-b pb-2 dark:text-gray-100 dark:border-gray-800">What is a CSS Gradient?</h2>
                <div class="space-y-4 text-gray-700 dark:text-gray-300">
                    <p>A CSS gradient is not an image. It's a special type of <code>&lt;image&gt;</code> that is generated entirely by browser code. It creates a smooth transition between two or more specified colors, allowing for beautiful, complex, and lightweight background effects.</p>
                    <p>Because gradients are pure CSS, they are <strong class="font-medium text-gray-900 dark:text-gray-100">better for performance</strong> (no file to download), more <strong class="font-medium text-gray-900 dark:text-gray-100">flexible</strong> (you can change them instantly), and <strong class="font-medium text-gray-900 dark:text-gray-100">scalable</strong> (they look perfect at any screen size).</p>
                    
                    <h3 class="text-lg font-semibold pt-2 text-gray-900 dark:text-gray-100">The Two Main Types of Gradients</h3>
                    <p>This tool helps you build the two types of gradients used on the web:</p>
                    <ul class="list-disc list-inside ml-5 space-y-1">
                        <li><strong>Linear Gradients:</strong> Defined by <code>linear-gradient()</code>, this creates a color transition along a straight line. You can control the angle of this line (e.g., top-to-bottom, left-to-right, or diagonally).</li>
                        <li><strong>Radial Gradients:</strong> Defined by <code>radial-gradient()</code>, this creates a transition that radiates outwards from a central point. The shapes can be circular or elliptical.</li>
                    </ul>
                </div>
            </div>
            <h2 class="text-2xl font-bold text-gray-900 border-b pb-2 dark:text-gray-100 dark:border-gray-800">How to Use the Gradient Generator</h2>
            <ol class="list-decimal list-inside text-gray-600 space-y-2 dark:text-gray-300">
                <li><strong>Select Type:</strong> Choose between a 'Linear' or 'Radial' gradient.</li>
                <li><strong>Adjust Direction:</strong> For linear gradients, drag the handle on the dial or enter a degree value to change the angle.</li>
                <li><strong>Customize Colors:</strong> Click on the color swatches to open the color picker. Drag the sliders to adjust where each color begins and ends.</li>
                <li><strong>Add or Remove Colors:</strong> Click "Add Color" to create a multi-color gradient. Use the trash icon to remove a color stop.</li>
                <li><strong>Copy Code:</strong> Once you're happy with the preview, click the copy button to get the CSS code for your project.</li>
            </ol>
            <h2 class="text-2xl font-bold text-gray-900 border-b pb-2 dark:text-gray-100 dark:border-gray-800">Frequently Asked Questions (FAQs)</h2>
            <div class="space-y-3 text-sm">
                 <details class="group">
                    <summary class="flex justify-between items-center font-medium cursor-pointer list-none p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                        <span>How can I make a smoother gradient?</span>
                        <span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span>
                    </summary>
                    <p class="text-gray-600 mt-2 p-2 dark:text-gray-300">For a smoother transition, choose colors that are closer to each other in hue and brightness. You can also add intermediate color stops between your main colors to create a more gradual change.</p>
                </details>
                <details class="group">
                    <summary class="flex justify-between items-center font-medium cursor-pointer list-none p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                        <span>What browsers support CSS gradients?</span>
                         <span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span>
                    </summary>
                    <p class="text-gray-600 mt-2 p-2 dark:text-gray-300">CSS gradients are widely supported by all modern web browsers, including Chrome, Firefox, Safari, and Edge. The code generated by this tool is standard and does not require vendor prefixes for current browser versions.</p>
                </details>
                <details class="group">
                    <summary class="flex justify-between items-center font-medium cursor-pointer list-none p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                        <span>What's the difference between Linear and Radial?</span>
                        <span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span>
                    </summary>
                    <p class="text-gray-600 mt-2 p-2 dark:text-gray-300">A <strong class="font-medium text-gray-900 dark:text-gray-100">Linear</strong> gradient proceeds in a straight line. You define its direction with an angle (e.g., <code>180deg</code> is top-to-bottom). It's perfect for most website backgrounds or button styles. <br><br> A <strong class="font-medium text-gray-900 dark:text-gray-100">Radial</strong> gradient starts from a single point and radiates outwards in a circle or ellipse. This is better for "spotlight" effects or creating a sense of depth from a central point.</p>
                </details>

                <details class="group">
                    <summary class="flex justify-between items-center font-medium cursor-pointer list-none p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                        <span>How do I create "hard stops" or stripes?</span>
                        <span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span>
                    </summary>
                    <p class="text-gray-600 mt-2 p-2 dark:text-gray-300">To create a hard line instead of a smooth fade, set the position of two adjacent color stops to the exact same value. <br><br> For example, if you set "Color 1" to <code>50%</code> and "Color 2" to <code>50%</code>, the gradient will instantly switch from Color 1 to Color 2 at the halfway mark, creating a stripe. You can do this easily with the position sliders in the tool.</p>
                </details>

                <details class="group">
                    <summary class="flex justify-between items-center font-medium cursor-pointer list-none p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                        <span>Can I add more than two colors?</span>
                        <span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span>
                    </summary>
                    <p class="text-gray-600 mt-2 p-2 dark:text-gray-300">Yes. This tool supports multi-color gradients. Just click the "Add Color" button to add a new color stop. You can add as many as you need to create "rainbow" effects or complex, beautiful transitions. The position sliders for each color allow you to control exactly where each color begins and ends.</p>
                </details>
            </div>
        </section>
    </main>
    
    <script src="../javascript/globals.js" defer></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        if (typeof window.injectLayout === 'function') {
            window.injectLayout(false);
        } else {
            console.warn('`injectLayout` function not found. Header/footer will not be injected.');
        }

        const state = {
            type: 'linear', // linear or radial
            angle: 90,
            colors: [
                { color: '#10b981', position: 0 },
                { color: '#4f46e5', position: 100 }
            ]
        };

        const previewBox = document.getElementById('preview-box');
        const cssCode = document.getElementById('css-code');
        const copyBtn = document.getElementById('copy-btn');
        const colorStopsContainer = document.getElementById('color-stops-container');
        const addColorBtn = document.getElementById('add-color-btn');
        const randomBtn = document.getElementById('random-btn');
        const angleControlWrapper = document.getElementById('angle-control-wrapper');
        const angleInput = document.getElementById('angle-input');
        const angleHandle = document.getElementById('angle-handle');
        const angleDial = document.querySelector('.angle-dial');

        function updateGradient() {
            const colorStops = state.colors
                .sort((a, b) => a.position - b.position)
                .map(c => `${c.color} ${c.position}%`).join(', ');

            let gradientCss;
            if (state.type === 'linear') {
                gradientCss = `linear-gradient(${state.angle}deg, ${colorStops})`;
                angleControlWrapper.style.display = 'block';
            } else {
                gradientCss = `radial-gradient(circle, ${colorStops})`;
                angleControlWrapper.style.display = 'none';
            }

            previewBox.style.background = gradientCss;
            cssCode.textContent = `background: ${gradientCss};`;
            updateAngleDial();
        }

        function createColorStopUI(color, position, index) {
            const id = `color-stop-${Date.now()}-${index}`;
            const stopDiv = document.createElement('div');
            stopDiv.className = 'flex items-center space-x-2';
            stopDiv.innerHTML = `
                <input type="color" value="${color}" data-index="${index}" class="color-picker">
                <input type="text" value="${color.toUpperCase()}" data-index="${index}" class="hex-input flex-grow p-2 border rounded-lg text-sm w-24">
                <input type="range" min="0" max="100" value="${position}" data-index="${index}" class="position-slider flex-grow">
                <span class="text-xs w-10 text-center">${position}%</span>
                <button data-index="${index}" class="remove-color-btn p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 ${state.colors.length <= 2 ? 'opacity-50 cursor-not-allowed' : ''}" ${state.colors.length <= 2 ? 'disabled' : ''}>
                    <i data-lucide="trash-2" class="w-4 h-4 text-red-500"></i>
                </button>
            `;
            colorStopsContainer.appendChild(stopDiv);
            lucide.createIcons();
        }

        function renderColorStops() {
            colorStopsContainer.innerHTML = '';
            state.colors.forEach((c, i) => createColorStopUI(c.color, c.position, i));
        }

        function handleColorChange(e) {
            const index = parseInt(e.target.dataset.index);
            const newColor = e.target.value;
            const stopDiv = e.target.closest('.flex.items-center');

            if (e.target.matches('.hex-input')) {
                // Only update if the hex code is valid
                if (!/^#([0-9A-F]{3}){1,2}$/i.test(newColor)) return; 
                stopDiv.querySelector('.color-picker').value = newColor;
            } else { // The change came from the color picker
                stopDiv.querySelector('.hex-input').value = newColor.toUpperCase();
            }

            state.colors[index].color = newColor;
            updateGradient();
        }
        
        function handlePositionChange(e) {
            const index = parseInt(e.target.dataset.index);
            const newPosition = parseInt(e.target.value);
            
            state.colors[index].position = newPosition;

            // Update the percentage text next to the slider without re-rendering everything
            const stopDiv = e.target.closest('.flex.items-center');
            if (stopDiv) {
                stopDiv.querySelector('span').textContent = `${newPosition}%`;
            }

            updateGradient();
        }

        function handleRemoveColor(index) {
            if (state.colors.length > 2) {
                state.colors.splice(index, 1);
                renderColorStops();
                updateGradient();
            }
        }

        function addColor() {
            const lastColor = state.colors[state.colors.length - 1];
            const newColor = { color: lastColor.color, position: 100 };
            state.colors.push(newColor);
            renderColorStops();
            updateGradient();
        }
        
        function randomHex() {
            return '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0');
        }

        function randomize() {
            state.colors.forEach(c => c.color = randomHex());
            state.angle = Math.floor(Math.random() * 361);
            angleInput.value = state.angle;
            renderColorStops();
            updateGradient();
        }
        
        function updateAngleDial() {
            if (state.type !== 'linear') return;
            const angleRad = (state.angle - 90) * (Math.PI / 180);
            const radius = angleDial.offsetWidth / 2 - angleHandle.offsetWidth / 2;
            const x = radius * Math.cos(angleRad);
            const y = radius * Math.sin(angleRad);
            angleHandle.style.transform = `translate(-50%, -50%) translate(${x}px, ${y}px)`;
        }

        let isDraggingAngle = false;
        angleDial.addEventListener('mousedown', (e) => { e.preventDefault(); isDraggingAngle = true; });
        document.addEventListener('mouseup', () => isDraggingAngle = false);
        document.addEventListener('mousemove', (e) => {
            if (!isDraggingAngle) return;
            const rect = angleDial.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            const angleRad = Math.atan2(e.clientY - centerY, e.clientX - centerX);
            let angleDeg = Math.round(angleRad * (180 / Math.PI) + 90);
            if (angleDeg < 0) angleDeg += 360;
            state.angle = angleDeg;
            angleInput.value = angleDeg;
            updateGradient();
        });

        colorStopsContainer.addEventListener('input', e => {
            if (e.target.matches('.color-picker') || e.target.matches('.hex-input')) handleColorChange(e);
            if (e.target.matches('.position-slider')) handlePositionChange(e);
        });
        
        colorStopsContainer.addEventListener('click', e => {
            const btn = e.target.closest('.remove-color-btn');
            if (btn) handleRemoveColor(parseInt(btn.dataset.index));
        });

        document.getElementById('gradient-type').addEventListener('click', e => {
            const btn = e.target.closest('.type-btn');
            if(btn) {
                document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                state.type = btn.dataset.type;
                updateGradient();
            }
        });
        
        angleInput.addEventListener('input', (e) => {
            let val = parseInt(e.target.value) || 0;
            if (val > 360) val = 360;
            if (val < 0) val = 0;
            e.target.value = val;
            state.angle = val;
            updateGradient();
        });

        // --- FUNCTIONALITY FIX STARTS HERE ---
        copyBtn.addEventListener('click', () => {
            const textToCopy = cssCode.textContent;
            if (!textToCopy) return;

            const copySuccess = () => {
                const originalIconHTML = '<i data-lucide="copy" class="w-4 h-4 text-gray-500 dark:text-gray-400"></i>';
                const successIconHTML = '<i data-lucide="check" class="w-4 h-4 text-emerald-500"></i>';
                
                copyBtn.innerHTML = successIconHTML;
                lucide.createIcons();
                
                setTimeout(() => {
                    copyBtn.innerHTML = originalIconHTML;
                    lucide.createIcons();
                }, 1500);
            };

            if (navigator.clipboard && window.isSecureContext) {
                 navigator.clipboard.writeText(textToCopy)
                    .then(copySuccess)
                    .catch(err => console.error('Failed to copy text with modern API: ', err));
            } else {
                const textArea = document.createElement("textarea");
                textArea.value = textToCopy;
                textArea.style.position = "absolute";
                textArea.style.left = "-9999px";
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    copySuccess();
                } catch (err) {
                    console.error('Fallback copy command failed: ', err);
                }
                document.body.removeChild(textArea);
            }
        });
        // --- FUNCTIONALITY FIX ENDS HERE ---

        addColorBtn.addEventListener('click', addColor);
        randomBtn.addEventListener('click', randomize);

        renderColorStops();
        updateGradient();
    });
    </script>
</body>
</html>