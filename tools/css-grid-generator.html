<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced CSS Grid Generator & Visual Builder | toolsTree</title>
    <meta name="description" content="Visually design complex CSS Grid layouts. Define tracks, gutters, and named areas, then export the clean, production-ready CSS code instantly.">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="canonical" href="https://toolstree.vercel.app/tools/css-grid-generator.html">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="../assets/output.css" rel="stylesheet">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N1KEVGM2VP"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-N1KEVGM2VP');
    </script>
    <script>
        (function() {
        try {
            const theme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (theme === 'dark' || (!theme && prefersDark)) {
            document.documentElement.classList.add('dark');
            } else {
            document.documentElement.classList.remove('dark');
            }
        } catch (e) { console.error("Error applying initial theme:", e); }
        })();
    </script>
    <script> window.GLOBAL_ROOT_PATH = '../'; </script>
    <script src="https://unpkg.com/lucide@latest" defer></script>
    <style>
        :root { --tt-primary-stroke: #10b981; }
        .stroke-tt-primary { stroke: var(--tt-primary-stroke); }
        .dark input, .dark select, .dark textarea { background-color: #374151; border-color: #4b5563; color: #f3f4f6; }
        .grid-container { display: grid; width: 100%; height: 100%; min-height: 300px; }
        .grid-cell {
            border: 1px dashed #6b7280;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            color: #1f2937;
            background-color: rgba(243, 244, 246, 0.8);
            cursor: pointer;
            transition: background-color 0.1s;
            padding: 10px 5px; 
        }
        .dark .grid-cell { color: #d1d5db; background-color: rgba(55, 65, 81, 0.5); border-color: #4b5563; }
        .grid-cell:hover { background-color: rgba(16, 185, 129, 0.2); }
        .grid-cell.selected { outline: 2px solid #ef4444; }
        .area-control { border-bottom: 1px solid #e5e7eb; padding: 0.5rem 0; }
        .dark .area-control { border-color: #4b5563; }
    </style>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "CSS Grid Generator & Visual Builder",
      "applicationCategory": "DeveloperApplication",
      "operatingSystem": "Web",
      "description": "Visually design and export complex CSS Grid layouts, including tracks, gutters, and named areas, for modern frontend development.",
      "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
      "aggregateRating": { "@type": "AggregateRating", "ratingValue": "5.0", "reviewCount": "412" },
      "publisher": { "@type": "Organization", "name": "toolsTree" }
    }
    </script>
</head>
<body class="bg-gray-50 dark:bg-black text-gray-800 dark:text-gray-100 flex flex-col min-h-screen">

    <main class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 flex-grow w-full">
        <nav class="flex mb-6" aria-label="Breadcrumb">
            <ol class="inline-flex items-center space-x-1 md:space-x-3 text-sm">
                <li class="inline-flex items-center"><a href="../index.html" class="hover:text-tt-primary"><i data-lucide="home" class="w-4 h-4 mr-2 inline"></i>Home</a></li>
                <li><div class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 text-gray-400"></i><a href="../categories/data-dev.html" class="ml-1 hover:text-tt-primary md:ml-2">Developer Tools</a></div></li>
                <li aria-current="page"><div class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 text-gray-400"></i><span class="ml-1 font-medium text-tt-primary md:ml-2">CSS Grid Generator</span></div></li>
            </ol>
        </nav>
        
        <section class="mb-10 text-center">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 dark:text-gray-100 mb-3">CSS Grid Generator & Visual Builder</h1>
            <p class="text-base text-gray-600 dark:text-gray-300">Visually build complex CSS Grid layouts, define named areas, and export clean, modern code.</p>
        </section>

        <div class="bg-white dark:bg-gray-900 shadow-2xl rounded-xl border border-gray-100 dark:border-gray-800">
            <div class="grid grid-cols-1 lg:grid-cols-2">
                <div class="p-6 sm:p-8 border-b lg:border-r lg:border-b-0 border-gray-200 dark:border-gray-800 space-y-6">
                    <h2 class="text-xl font-bold mb-4">1. Grid Structure</h2>
                    <div class="space-y-4">
                        <label class="block text-sm font-medium">Columns (Tracks)</label>
                        <input id="col-tracks" type="text" value="1fr 1fr 1fr" placeholder="e.g., 1fr 200px 1fr" class="w-full p-2 border rounded-lg font-mono">
                        <label class="block text-sm font-medium">Rows (Tracks)</label>
                        <input id="row-tracks" type="text" value="auto 1fr auto" placeholder="e.g., auto 1fr auto" class="w-full p-2 border rounded-lg font-mono">
                    </div>
                    <div class="grid grid-cols-2 gap-4 pt-4 border-t dark:border-gray-800">
                        <div>
                            <label for="row-gap" class="block text-sm font-medium">Row Gap (px)</label>
                            <input id="row-gap" type="number" min="0" value="10" class="w-full p-2 border rounded-lg">
                        </div>
                        <div>
                            <label for="col-gap" class="block text-sm font-medium">Column Gap (px)</label>
                            <input id="col-gap" type="number" min="0" value="10" class="w-full p-2 border rounded-lg">
                        </div>
                    </div>
                    <h2 class="text-xl font-bold mt-6 mb-4 pt-4 border-t dark:border-gray-800">2. Named Areas</h2>
                    <div class="space-y-3">
                        <label for="area-name-input" class="block text-sm font-medium">Assign Selected Cells to Area:</label>
                        <div class="flex space-x-2">
                            <input id="area-name-input" type="text" placeholder="e.g., header, sidebar" class="flex-grow p-2 border rounded-lg">
                            <button id="assign-area-btn" disabled class="px-4 py-2 text-sm bg-tt-primary text-white font-semibold rounded-lg hover:bg-green-700 transition disabled:bg-gray-400">Assign</button>
                        </div>
                        <div id="named-areas-list" class="text-sm space-y-1 max-h-40 overflow-y-auto p-1"></div>
                    </div>
                </div>
                <div class="p-6 sm:p-8">
                    <div class="flex justify-between items-center mb-6">
                       <h2 class="text-xl font-bold">Live Preview</h2>
                       <button id="reset-areas-btn" class="flex items-center space-x-2 text-sm bg-red-100 text-red-600 font-semibold py-2 px-4 rounded-lg shadow-sm hover:bg-red-200 transition">
                           <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                           <span>Reset Areas</span>
                       </button>
                    </div>
                    <div id="preview-container" class="w-full h-96 rounded-xl border-2 border-dashed border-tt-primary mb-6 transition-all duration-300">
                        <div id="grid-visualizer" class="grid-container"></div>
                    </div>
                    <div>
                        <div class="flex justify-between items-center mb-1">
                            <label for="css-code" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Generated CSS</label>
                            <div class="w-8 h-8">
                                <button id="copy-btn" class="p-2 rounded-md transition">
                                    <i data-lucide="copy" class="w-4 h-4 text-gray-500 dark:text-gray-400"></i>
                                </button>
                            </div>
                        </div>
                        <pre class="w-full p-4 border border-gray-300 dark:border-gray-800 rounded-lg bg-gray-50 dark:bg-gray-900/50 overflow-x-auto text-sm"><code id="css-code" class="text-gray-700 dark:text-gray-200"></code></pre>
                        </div>
                </div>
            </div>
        </div>
        
        <section class="mt-8 bg-white p-6 rounded-xl shadow-lg dark:bg-gray-900 border border-gray-100 dark:border-gray-800 space-y-6">
            <h2 class="text-2xl font-bold text-gray-900 border-b pb-2 dark:text-gray-100 dark:border-gray-800">How to Use the Grid Generator</h2>
            <ol class="list-decimal list-inside text-sm text-gray-600 space-y-2 dark:text-gray-300">
                <li><strong>Define Tracks:</strong> Enter track sizes (e.g., `1fr 1fr` or `200px auto`) for columns and rows. The preview updates instantly.</li>
                <li><strong>Set Gutters:</strong> Adjust the row and column gaps in pixels.</li>
                <li><strong>Select Cells:</strong> Click on cells in the live preview to select them.</li>
                <li><strong>Assign Areas:</strong> Enter a name (e.g., `header`) and click "Assign." The CSS will include `grid-template-areas`.</li>
                <li><strong>Export Code:</strong> Click the copy button to get the complete CSS block.</li>
            </ol>
            <h2 class="text-2xl font-bold text-gray-900 border-b pb-2 dark:text-gray-100 dark:border-gray-800">Frequently Asked Questions (FAQ)</h2>
            <div class="space-y-3 text-sm">
                 <details class="group">
                    <summary class="flex justify-between items-center font-medium cursor-pointer list-none p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                        <span>What's the difference between `fr`, `auto`, and `px`?</span>
                        <span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span>
                    </summary>
                    <div class="text-gray-600 mt-2 p-2 dark:text-gray-300">
                        <p>These are common CSS Grid track sizing units:</p> 
                        <ul class="list-disc list-inside mt-2 space-y-1">
                            <li><strong>`fr` (Fractional Unit):</strong> Divides available space proportionally. Ideal for responsive design.</li>
                            <li><strong>`auto`:</strong> Sizes the track to fit the largest content in that track.</li>
                            <li><strong>`px` or `%`:</strong> Sets a fixed or percentage-based width for the track.</li>
                        </ul>
                    </div>
                </details>
                <details class="group">
                    <summary class="flex justify-between items-center font-medium cursor-pointer list-none p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                        <span>How do I make a cell span multiple columns or rows?</span>
                         <span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span>
                    </summary>
                    <p class="text-gray-600 mt-2 p-2 dark:text-gray-300">Use the <strong>Named Areas</strong> feature. Select all the cells you want an item to cover (e.g., the top three cells for a header) and assign them the same area name (e.g., `header`). CSS Grid automatically merges adjacent cells with the same name.</p>
                </details>
            </div>
        </section>
    </main>
    
    <script src="../javascript/globals.js" defer></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- 1. INITIALIZE LAYOUT ---
        if (typeof window.injectLayout === 'function') {
            window.injectLayout(false);
        }

        // --- 2. DEFINE UI ELEMENTS AND STATE ---
        const ui = {
            colTracksInput: document.getElementById('col-tracks'),
            rowTracksInput: document.getElementById('row-tracks'),
            rowGapInput: document.getElementById('row-gap'),
            colGapInput: document.getElementById('col-gap'),
            gridVisualizer: document.getElementById('grid-visualizer'),
            areaNameInput: document.getElementById('area-name-input'),
            assignAreaBtn: document.getElementById('assign-area-btn'),
            resetAreasBtn: document.getElementById('reset-areas-btn'),
            namedAreasList: document.getElementById('named-areas-list'),
            cssCode: document.getElementById('css-code'),
            copyBtn: document.getElementById('copy-btn'),
        };

        const state = {
            cols: 0, rows: 0,
            trackDefinitions: { cols: '1fr 1fr 1fr', rows: 'auto 1fr auto' },
            gaps: { row: 10, col: 10 },
            gridAreas: [], selectedCells: [], areaColors: {},
        };
        
        const COLORS = ['#10b981', '#ef4444', '#f59e0b', '#3b82f6', '#8b5cf6', '#d946ef'];

        // --- 3. CORE LOGIC FUNCTIONS ---
        function parseTracks(trackString) {
            return (trackString || '').trim().split(/\s+/).filter(t => t);
        }

        function updateGridDimensions() {
            const parsedCols = parseTracks(ui.colTracksInput.value);
            const parsedRows = parseTracks(ui.rowTracksInput.value);

            state.trackDefinitions.cols = parsedCols.join(' ');
            state.trackDefinitions.rows = parsedRows.join(' ');
            const newCols = parsedCols.length;
            const newRows = parsedRows.length;

            if (newRows !== state.rows || newCols !== state.cols) {
                const oldAreas = state.gridAreas;
                state.gridAreas = Array(newRows).fill(0).map((_, r) => 
                    Array(newCols).fill(0).map((_, c) => (oldAreas[r] && oldAreas[r][c]) ? oldAreas[r][c] : '.')
                );
                state.rows = newRows; state.cols = newCols;
            }
            
            renderVisualizer();
            generateCode();
        }

        function generateCode() {
            if (state.rows === 0 || state.cols === 0) {
                ui.cssCode.textContent = `.grid-container {\n  /* Enter valid track definitions to generate code. */\n}`;
                return;
            }
            const templateAreas = state.gridAreas.map(row => `"${row.map(area => area.replace(/\s/g, '_')).join(' ')}"`).join('\n');
            const css = `.grid-container {\n  display: grid;\n  grid-template-columns: ${state.trackDefinitions.cols || 'auto'};\n  grid-template-rows: ${state.trackDefinitions.rows || 'auto'};\n  grid-gap: ${state.gaps.row}px ${state.gaps.col}px;\n  grid-template-areas:\n    ${templateAreas.replace(/\n/g, '\n    ')};\n}`;
            ui.cssCode.textContent = css.trim();
        }

        function renderVisualizer() {
            ui.gridVisualizer.style.gridTemplateColumns = state.trackDefinitions.cols;
            ui.gridVisualizer.style.gridTemplateRows = state.trackDefinitions.rows;
            ui.gridVisualizer.style.gridGap = `${state.gaps.row}px ${state.gaps.col}px`;
            ui.gridVisualizer.innerHTML = '';
            
            if (state.rows > 0 && state.cols > 0) {
                for (let r = 0; r < state.rows; r++) {
                    for (let c = 0; c < state.cols; c++) {
                        const cell = document.createElement('div');
                        const areaName = state.gridAreas[r][c]; 
                        cell.className = 'grid-cell';
                        cell.dataset.row = r; cell.dataset.col = c;
                        cell.textContent = areaName === '.' ? '.' : areaName;
                        if (areaName !== '.') {
                            const color = state.areaColors[areaName] || '#9ca3af';
                            cell.style.backgroundColor = color;
                            cell.style.color = '#fff';
                            cell.style.borderColor = color; 
                            cell.style.borderStyle = 'solid';
                        }
                        if (state.selectedCells.some(s => s.r === r && s.c === c)) {
                            cell.classList.add('selected');
                        }
                        ui.gridVisualizer.appendChild(cell);
                    }
                }
            } else {
                 ui.gridVisualizer.innerHTML = '<div class="flex items-center justify-center text-gray-500 w-full h-full">Enter valid track definitions above.</div>';
            }
            renderNamedAreasList();
        }
        
        function renderNamedAreasList() {
            ui.namedAreasList.innerHTML = '';
            const existingAreas = new Set(state.gridAreas.flat().filter(area => area !== '.'));
            
            if (existingAreas.size === 0) {
                 ui.namedAreasList.innerHTML = '<p class="text-gray-500 text-sm italic">No areas assigned yet.</p>';
                 return;
            }
            existingAreas.forEach(areaName => {
                const color = state.areaColors[areaName];
                const areaDiv = document.createElement('div');
                areaDiv.className = 'flex justify-between items-center area-control';
                areaDiv.innerHTML = `
                    <div class="flex items-center space-x-2">
                        <span style="background-color: ${color}; width: 12px; height: 12px; border-radius: 3px;"></span>
                        <span class="font-mono text-sm">${areaName}</span>
                    </div>
                    <button data-area="${areaName}" class="remove-area-btn p-1 text-red-500 hover:text-red-700">
                        <i data-lucide="x" class="w-4 h-4"></i>
                    </button>
                `;
                ui.namedAreasList.appendChild(areaDiv);
            });
            if (window.lucide) lucide.createIcons();
        }

        // --- 4. EVENT HANDLER FUNCTIONS ---
        function handleCellClick(e) {
            if (state.rows === 0 || state.cols === 0) return;
            const cell = e.target.closest('.grid-cell');
            if (!cell) return;
            const r = parseInt(cell.dataset.row);
            const c = parseInt(cell.dataset.col);
            const index = state.selectedCells.findIndex(s => s.r === r && s.c === c);
            if (index > -1) {
                state.selectedCells.splice(index, 1);
            } else {
                state.selectedCells.push({ r, c });
            }
            ui.assignAreaBtn.disabled = state.selectedCells.length === 0;
            renderVisualizer();
        }
        
        function handleAssignArea() {
            const areaName = ui.areaNameInput.value.trim().replace(/\s/g, '_').toLowerCase() || 'unnamed-area';
            if (state.selectedCells.length === 0) return;
            if (!state.areaColors[areaName]) {
                 const existingColorCount = Object.keys(state.areaColors).length;
                 state.areaColors[areaName] = COLORS[existingColorCount % COLORS.length];
            }
            state.selectedCells.forEach(s => {
                if (state.gridAreas[s.r] !== undefined && state.gridAreas[s.r][s.c] !== undefined) {
                    state.gridAreas[s.r][s.c] = areaName;
                }
            });
            state.selectedCells = [];
            ui.areaNameInput.value = '';
            ui.assignAreaBtn.disabled = true;
            renderVisualizer();
            generateCode();
        }
        
        function handleRemoveArea(e) {
            const btn = e.target.closest('.remove-area-btn');
            if (!btn) return;
            const areaToRemove = btn.dataset.area;
            state.gridAreas = state.gridAreas.map(row => 
                row.map(area => area === areaToRemove ? '.' : area)
            );
            delete state.areaColors[areaToRemove];
            renderVisualizer();
            generateCode();
        }
        
        function handleResetAreas() {
            state.gridAreas = (state.rows > 0 && state.cols > 0)
                ? Array(state.rows).fill(0).map(() => Array(state.cols).fill('.'))
                : [];
            state.selectedCells = []; state.areaColors = {};
            ui.assignAreaBtn.disabled = true;
            renderVisualizer();
            generateCode();
        }

        // --- 5. ATTACH EVENT LISTENERS ---
        const inputControls = [ui.colTracksInput, ui.rowTracksInput, ui.rowGapInput, ui.colGapInput];
        inputControls.forEach(input => {
            input.addEventListener('input', () => {
                if (input.type === 'number') {
                    state.gaps.row = parseInt(ui.rowGapInput.value) || 0;
                    state.gaps.col = parseInt(ui.colGapInput.value) || 0;
                }
                updateGridDimensions();
            });
        });

        ui.gridVisualizer.addEventListener('click', handleCellClick);
        ui.assignAreaBtn.addEventListener('click', handleAssignArea);
        ui.namedAreasList.addEventListener('click', handleRemoveArea);
        ui.resetAreasBtn.addEventListener('click', handleResetAreas);
        
        // --- FUNCTIONALITY FIX STARTS HERE ---
        ui.copyBtn.addEventListener('click', () => {
            const textToCopy = ui.cssCode.textContent;
            if (!textToCopy) return;

            const copySuccess = () => {
                const originalIconHTML = '<i data-lucide="copy" class="w-4 h-4 text-gray-500 dark:text-gray-400"></i>';
                const successIconHTML = '<i data-lucide="check" class="w-4 h-4 text-emerald-500"></i>';
                
                ui.copyBtn.innerHTML = successIconHTML;
                lucide.createIcons();
                
                setTimeout(() => {
                    ui.copyBtn.innerHTML = originalIconHTML;
                    lucide.createIcons();
                }, 1500);
            };

            if (navigator.clipboard && window.isSecureContext) {
                 navigator.clipboard.writeText(textToCopy)
                    .then(copySuccess)
                    .catch(err => console.error('Failed to copy text with modern API: ', err));
            } else {
                const textArea = document.createElement("textarea");
                textArea.value = textToCopy;
                textArea.style.position = "absolute";
                textArea.style.left = "-9999px";
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    copySuccess();
                } catch (err) {
                    console.error('Fallback copy command failed: ', err);
                }
                document.body.removeChild(textArea);
            }
        });
        // --- FUNCTIONALITY FIX ENDS HERE ---
        
        // --- 6. INITIALIZE THE TOOL ---
        updateGridDimensions();
    });
    </script>
</body>
</html>