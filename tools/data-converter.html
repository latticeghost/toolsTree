<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Data Converter (Base64, URL, Unicode, Hex, Octal) | toolsTree</title>
    <meta name="description" content="An advanced developer utility to encode, decode, and convert data. Supports Base64, URL, and Character Codes in any base (2-36), including Hex, Octal, Decimal, and Binary.">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="canonical" href="https://toolstree.vercel.app/tools/data-converter.html">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;600&display=swap" rel="stylesheet">
    <link href="../assets/output.css" rel="stylesheet">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N1KEVGM2VP"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-N1KEVGM2VP');
    </script>
    <script>
        (function() {
        try {
            const theme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            if (theme === 'dark' || (!theme && prefersDark)) {
            document.documentElement.classList.add('dark');
            } else {
            document.documentElement.classList.remove('dark');
            }
        } catch (e) {
            console.error("Error applying initial theme:", e);
            document.documentElement.classList.remove('dark');
        }
        })();
    </script>
    <script>
        window.GLOBAL_ROOT_PATH = '../';
    </script>
    <script src="https://unpkg.com/lucide@latest" defer></script>
    <style>
        :root { --tt-primary-stroke: #10b981; }
        .stroke-tt-primary { stroke: var(--tt-primary-stroke); }
        .dark input, .dark select, .dark textarea { background-color: #374151; border-color: #4b5563; color: #f3f4f6; }
        textarea { min-height: 200px; font-family: 'Roboto Mono', monospace; }
        input[type="radio"]:checked + label { background-color: #10b981; color: white; border-color: #10b981; }
        .text-tt-primary { color: #10b981; }
    </style>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Advanced Data Converter",
      "applicationCategory": "DeveloperApplication",
      "operatingSystem": "Web",
      "description": "Encode and decode text or files between various formats, including Base64, URL Encoding, and character codes in any base from 2 to 36.",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "5.0",
        "reviewCount": "1150"
      },
      "publisher": {
        "@type": "Organization",
        "name": "toolsTree"
      }
    }
    </script>
    <script type="application/ld+json">
        {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
            "@type": "Question",
            "name": "Why would I use a custom base?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "While bases like 2 (Binary), 8 (Octal), 10 (Decimal), and 16 (Hex) are standard in computing, other bases are used in various fields. For example, Base36 (`0-9` and `A-Z`) is sometimes used to create shorter, more human-readable identifiers. This feature provides maximum flexibility for any niche requirement."
            }
            },
            {
            "@type": "Question",
            "name": "Is this tool secure for sensitive data?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "Yes. All encoding and decoding operations happen entirely within your browser on your computer. No data, whether pasted text or uploaded files, is ever sent to our servers, ensuring your information remains completely private."
            }
            },
            {
            "@type": "Question",
            "name": "Is Base64 a form of encryption?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "No. This is a critical misconception. Base64 is an encoding, not encryption. It is 100% reversible by anyone and offers zero privacy. Its only purpose is to make binary data safe to transport over text-only systems. Never use Base64 to 'hide' or 'secure' sensitive data."
            }
            },
            {
            "@type": "Question",
            "name": "When should I use Base64 vs. URL Encoding?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "The rule is simple: Use Base64 when you need to represent binary data (like an image or file) as a string. Use URL Encoding when you need to put plain text inside a URL."
            }
            },
            {
            "@type": "Question",
            "name": "What do 'btoa()' and 'atob()' mean?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "You may see these in JavaScript. They are the built-in browser functions for Base64. `btoa()` stands for 'Binary to ASCII' and is used to encode a string into Base64. `atob()` stands for 'ASCII to Binary' and is used to decode a Base64 string back to its original form."
            }
            },
            {
            "@type": "Question",
            "name": "How does file input work differently for Base64?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "The tool is smart about file handling: When in Base64 mode, dropping a file (like an image or PDF) will read its binary content and encode/decode it as a Base64 string. For all other modes (URL, Character Codes), dropping a file will read its content as plain text before converting."
            }
            }
        ]
        }
    </script>
</head>
<body class="bg-gray-50 dark:bg-black text-gray-800 dark:text-gray-100 flex flex-col min-h-screen">

    <main class="max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 flex-grow w-full">
        <nav class="flex mb-6" aria-label="Breadcrumb">
            <ol class="inline-flex items-center space-x-1 md:space-x-3 text-sm">
                <li class="inline-flex items-center"><a href="../index.html" class="hover:text-tt-primary"><i data-lucide="home" class="w-4 h-4 mr-2 inline"></i>Home</a></li>
                <li><div class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 text-gray-400"></i><a href="../categories/data-dev.html" class="ml-1 hover:text-tt-primary md:ml-2">Data & Developer Tools</a></div></li>
                <li aria-current="page"><div class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 text-gray-400"></i><span class="ml-1 font-medium text-tt-primary md:ml-2">Advanced Data Converter</span></div></li>
            </ol>
        </nav>
        
        <section class="mb-8 text-center">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 dark:text-gray-100 mb-3">Advanced Data Converter</h1>
            <p class="text-base text-gray-600 dark:text-gray-300">Encode and decode Base64, URL, and Character Codes (including custom bases) for text and files.</p>
        </section>

        <div class="bg-white dark:bg-gray-900 shadow-2xl rounded-xl p-6 sm:p-8 border border-gray-100 dark:border-gray-800">
            <div class="mb-6">
                <label class="text-lg font-semibold block mb-3">Conversion Mode:</label>
                <div id="mode-selector" class="grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm text-center">
                    <input type="radio" id="modeUnicode" name="mode" value="unicode" checked class="hidden"><label for="modeUnicode" class="cursor-pointer p-2 border rounded-lg">Character Codes</label>
                    <input type="radio" id="modeBase64" name="mode" value="base64" class="hidden"><label for="modeBase64" class="cursor-pointer p-2 border rounded-lg">Base64</label>
                    <input type="radio" id="modeUrl" name="mode" value="url" class="hidden"><label for="modeUrl" class="cursor-pointer p-2 border rounded-lg">URL Encoding</label>
                </div>
            </div>

            <div id="options-container" class="p-4 mb-6 bg-gray-50 dark:bg-gray-900/50 rounded-xl border dark:border-gray-800"></div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <div class="flex justify-between items-center mb-2">
                        <label id="inputLabel" for="inputText" class="text-lg font-semibold">Input</label>
                        <button id="clearButton" title="Clear Text" class="group p-2 rounded-md transition-opacity opacity-0 pointer-events-none">
                            <i data-lucide="trash-2" class="w-4 h-4 text-red-500 transition-colors"></i>
                        </button>
                    </div>
                    <textarea id="inputText" placeholder="Type, paste, or drop a file here..." class="w-full p-4 border rounded-lg transition hover:border-tt-primary"></textarea>
                    <p id="file-info" class="text-xs text-gray-500 mt-1 h-4"></p>
                </div>

                <div>
                    <div class="flex justify-between items-center mb-2">
                        <label id="outputLabel" for="outputText" class="text-lg font-semibold">Output</label>
                        <button id="copyButton" title="Copy Result" class="group p-2 rounded-md transition-opacity opacity-0 pointer-events-none">
                            <i data-lucide="copy" class="w-4 h-4 text-gray-500 dark:text-gray-400 transition-colors group-hover:text-tt-primary"></i>
                        </button>
                    </div>
                    <textarea id="outputText" readonly placeholder="Result appears here..." class="w-full p-4 border rounded-lg bg-gray-100 dark:bg-gray-700"></textarea>
                </div>
            </div>
            <div id="message-box" class="mt-4 text-center text-sm h-6"></div>
        </div>
        
        <section class="mt-8 bg-white p-6 rounded-xl shadow-lg dark:bg-gray-900 border border-gray-100 dark:border-gray-800 space-y-6">
            <div>
                <h2 class="text-2xl font-bold mb-3 text-gray-900 border-b pb-2 dark:text-gray-100 dark:border-gray-800">A Developer's Guide to Data Encoding</h2>
                <p class="text-gray-600 mb-6 dark:text-gray-300">Encoding is the process of converting data into a specific format for safe, reliable transmission or storage. It is not encryption, but rather a reversible transformation. This tool handles the three most common web encoding types.</p>
                
                <div class="space-y-5">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">1. Base64 Encoding</h3>
                        <p class="mt-1 text-gray-700 dark:text-gray-300">Base64 is a method that converts any binary data (like an image, a zip file, or even complex text) into a plain-text string. The resulting string uses only 64 "safe" characters (<code>A-Z</code>, <code>a-z</code>, <code>0-9</code>, <code>+</code>, <code>/</code>) and a padding character (<code>=</code>).</p>
                        <ul class="list-disc list-inside ml-5 text-sm space-y-1 mt-2 text-gray-600 dark:text-gray-300">
                            <li><strong>Common Use:</strong> Embedding small images directly into a CSS or HTML file (<code>&lt;img src="data:image/png;base64,..."&gt;</code>) or attaching files to emails.</li>
                            <li><strong>This Tool:</strong> You can paste text or <strong class="font-medium">drag-and-drop an image file</strong> to instantly get its Base64 data URL.</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">2. URL Encoding (Percent-Encoding)</h3>
                        <p class="mt-1 text-gray-700 dark:text-gray-300">URLs can only contain a limited set of "safe" characters. URL Encoding, also called Percent-Encoding, converts unsafe characters into a format that can be safely transmitted in a URL. It does this by replacing the character with a percent sign (<code>%</code>) followed by its two-digit hex code.</p>
                        <ul class="list-disc list-inside ml-5 text-sm space-y-1 mt-2 text-gray-600 dark:text-gray-300">
                            <li><strong>Common Use:</strong> Making a search query safe, like converting "dogs & cats" into <code>dogs%20%26%20cats</code> to be put in a URL.</li>
                            <li><strong>This Tool:</strong> Instantly encode a full URL or just a piece of text to make it URL-safe.</li>
                        </ul>
                    </div>

                    <div>
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">3. Character Codes (Hex, Binary, etc.)</h3>
                        <p class="mt-1 text-gray-700 dark:text-gray-300">Every character on your keyboard is represented by a number in the computer. "Character Codes" are the different numerical bases used to express that number. For example, the letter "A" is 65 in Decimal (Base-10), 41 in Hexadecimal (Base-16), and 1010001 in Binary (Base-2).</p>
                        <ul class="list-disc list-inside ml-5 text-sm space-y-1 mt-2 text-gray-600 dark:text-gray-300">
                            <li><strong>Common Use:</strong> Low-level programming, data debugging, and network packet analysis.</li>
                            <li><strong>This Tool:</strong> Our advanced converter lets you instantly see the code for any character in any base from 2 to 36, giving you complete flexibility.</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div>
                <h2 class="text-2xl font-bold mb-3 text-gray-900 border-b pb-2 dark:text-gray-100 dark:border-gray-800">How to Use This Converter</h2>
                <ol class="list-decimal list-inside ml-5 space-y-2 text-gray-700 dark:text-gray-300">
                    <li>
                        <strong class="font-medium text-gray-900 dark:text-gray-100">Select Your Mode:</strong> Choose between "Character Codes," "Base64," or "URL Encoding" at the top.
                    </li>
                    <li>
                        <strong class="font-medium text-gray-900 dark:text-gray-100">Set Your Options:</strong>
                        <ul class="list-disc list-inside ml-5 text-sm mt-1">
                            <li>Select the <strong class="font-normal">Direction</strong> ("Encode" or "Decode").</li>
                            <li>If in "Character Codes" mode, pick your desired base (like Hex or Binary), or enter a <strong class="font-normal">Custom Base</strong> from 2 to 36.</li>
                        </ul>
                    </li>
                    <li>
                        <strong class="font-medium text-gray-900 dark:text-gray-100">Provide Your Input:</strong> You have two options:
                        <ul class="list-disc list-inside ml-5 text-sm mt-1">
                            <li>Paste your text directly into the "Input" box.</li>
                            <li><strong class="font-normal">Drag-and-drop a file</strong> onto the "Input" box. The tool is smart: for Base64 mode, it will read files (like images or PDFs) as a Data URL. For all other modes, it will read the file as plain text.</li>
                        </ul>
                    </li>
                    <li>
                        <strong class="font-medium text-gray-900 dark:text-gray-100">Get Your Result:</strong> The "Output" box will update instantly. You can then click the copy icon to get your converted data.
                    </li>
                </ol>
            </div>
            <div>
                <h2 class="text-2xl font-bold mb-3 text-gray-900 border-b pb-2 dark:text-gray-100 dark:border-gray-800">Frequently Asked Questions (FAQs)</h2>
                <div class="space-y-3 text-sm">
                    <details class="group"><summary class="flex justify-between items-center font-medium cursor-pointer p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700"><span>Why would I use a custom base?</span><span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span></summary><p class="text-gray-600 mt-2 p-2 dark:text-gray-300">While bases like 2 (Binary), 8 (Octal), 10 (Decimal), and 16 (Hex) are standard in computing, other bases are used in various fields. For example, Base36 (`0-9` and `A-Z`) is sometimes used to create shorter, more human-readable identifiers. This feature provides maximum flexibility for any niche requirement.</p></details>
                    <details class="group"><summary class="flex justify-between items-center font-medium cursor-pointer p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700"><span>Is this tool secure for sensitive data?</span><span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span></summary><p class="text-gray-600 mt-2 p-2 dark:text-gray-300">Yes. All encoding and decoding operations happen entirely within your browser on your computer. No data, whether pasted text or uploaded files, is ever sent to our servers, ensuring your information remains completely private.</p></details>
                    <details class="group">
                        <summary class="flex justify-between items-center font-medium cursor-pointer p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                            <span>Is Base64 a form of encryption?</span>
                            <span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span>
                        </summary>
                        <p class="text-gray-600 mt-2 p-2 dark:text-gray-300"><strong>No. This is a critical misconception.</strong> Base64 is an <strong class="font-medium">encoding</strong>, not <strong class="font-medium">encryption</strong>. It is 100% reversible by anyone and offers zero privacy. Its only purpose is to make binary data safe to transport over text-only systems. Never use Base64 to "hide" or "secure" sensitive data like passwords or private keys.</p>
                    </details>

                    <details class="group">
                        <summary class="flex justify-between items-center font-medium cursor-pointer p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                            <span>When should I use Base64 vs. URL Encoding?</span>
                            <span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span>
                        </summary>
                        <p class="text-gray-600 mt-2 p-2 dark:text-gray-300">The rule is simple: <br> • Use <strong class="font-medium text-gray-900 dark:text-gray-100">Base64</strong> when you need to represent <strong class="font-medium">binary data</strong> (like an image or file) as a string. <br> • Use <strong class="font-medium text-gray-900 dark:text-gray-100">URL Encoding</strong> when you need to put <strong class="font-medium">plain text</strong> <strong class="font-medium text-gray-900 dark:text-gray-100">inside</strong> a URL.</p>
                    </details>

                    <details class="group">
                        <summary class="flex justify-between items-center font-medium cursor-pointer p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                            <span>What do 'btoa()' and 'atob()' mean?</span>
                            <span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span>
                        </summary>
                        <p class="text-gray-600 mt-2 p-2 dark:text-gray-300">You may see these in JavaScript. They are the built-in browser functions for Base64. <br> • <code>btoa()</code> stands for "Binary to ASCII" and is used to <strong class="font-medium">encode</strong> a string into Base64. <br> • <code>atob()</code> stands for "ASCII to Binary" and is used to <strong class="font-medium">decode</strong> a Base64 string back to its original form.</p>
                    </details>
                    <details class="group">
                        <summary class="flex justify-between items-center font-medium cursor-pointer p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                            <span>How does file input work differently for Base64?</span>
                            <span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span>
                        </summary>
                        <p class="text-gray-600 mt-2 p-2 dark:text-gray-300">The tool is smart about file handling: <br> • When in <strong class="font-medium">Base64 mode</strong>, dropping a file (like an image or PDF) will read its binary content and encode/decode it as a Base64 string (often seen in Data URLs). <br> • For <strong class="font-medium">all other modes</strong> (URL, Character Codes), dropping a file will read its content as plain text before converting.</p>
                    </details>
                </div>
            </div>
        </section>
    </main>
    
    <script src="../javascript/globals.js" defer></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        if (typeof window.injectLayout === 'function') {
            window.injectLayout(false);
        }

        const ui = {
            inputText: document.getElementById('inputText'), 
            outputText: document.getElementById('outputText'),
            fileInfo: document.getElementById('file-info'), 
            optionsContainer: document.getElementById('options-container'), 
            modeRadios: document.querySelectorAll('input[name="mode"]'),
            copyButton: document.getElementById('copyButton'), 
            clearButton: document.getElementById('clearButton'),
            messageBox: document.getElementById('message-box'),
        };
        
        const dropZone = ui.inputText;

        const renderOptions = (mode) => {
            let html = '';
            const dirHTML = `<div class="flex items-center gap-4"><label class="font-medium">Direction:</label><div class="flex gap-4"><label><input type="radio" name="direction" value="encode" checked class="mr-1">Encode</label><label><input type="radio" name="direction" value="decode" class="mr-1">Decode</label></div></div>`;
            switch(mode) {
                case 'unicode': 
                    html = `<div class="space-y-4">${dirHTML}
                                <div class="flex items-center gap-4"><label class="font-medium">Code Base:</label>
                                    <div class="flex flex-wrap gap-4 text-sm">
                                        <label><input type="radio" name="codeBase" value="hex" checked class="mr-1">Hex (16)</label>
                                        <label><input type="radio" name="codeBase" value="dec" class="mr-1">Decimal (10)</label>
                                        <label><input type="radio" name="codeBase" value="oct" class="mr-1">Octal (8)</label>
                                        <label><input type="radio" name="codeBase" value="bin" class="mr-1">Binary (2)</label>
                                        <label class="flex items-center"><input type="radio" name="codeBase" value="custom" class="mr-1">Custom: 
                                            <input type="number" id="customBase" min="2" max="36" placeholder="2-36" class="w-20 ml-2 p-1 border rounded-md text-center">
                                        </label>
                                    </div>
                                </div>
                            </div>`; 
                    break;
                case 'base64': html = dirHTML; break;
                case 'url': html = dirHTML; break;
            }
            ui.optionsContainer.innerHTML = html;
            ui.optionsContainer.querySelectorAll('input, select').forEach(el => el.addEventListener('change', convert));
            const customBaseInput = document.getElementById('customBase');
            if (customBaseInput) {
                customBaseInput.addEventListener('input', () => {
                    document.querySelector('input[name="codeBase"][value="custom"]').checked = true;
                    convert();
                });
            }
        };

        const toggleActionButton = (button, enabled) => {
            button.classList.toggle('opacity-0', !enabled);
            button.classList.toggle('pointer-events-none', !enabled);
        };

        const convert = () => {
            const mode = document.querySelector('input[name="mode"]:checked').value;
            const input = ui.inputText.value;
            let output = '';
            
            try {
                const dir = document.querySelector('#options-container input[name="direction"]:checked').value;
                if (mode === 'base64') {
                    if (dir === 'encode') output = btoa(unescape(encodeURIComponent(input)));
                    else output = decodeURIComponent(escape(atob(input.replace(/\s/g, ''))));
                } else if (mode === 'url') {
                    if (dir === 'encode') output = encodeURIComponent(input);
                    else output = decodeURIComponent(input.replace(/\+/g, ' '));
                } else if (mode === 'unicode') {
                    const baseRadio = document.querySelector('#options-container input[name="codeBase"]:checked');
                    let base = baseRadio.value;
                    let baseVal = 0;

                    if (base === 'custom') {
                        baseVal = parseInt(document.getElementById('customBase').value);
                        if (isNaN(baseVal) || baseVal < 2 || baseVal > 36) throw new Error("Custom base must be between 2 and 36.");
                    } else {
                        const baseMap = { hex: 16, dec: 10, oct: 8, bin: 2 };
                        baseVal = baseMap[base];
                    }

                    if (dir === 'encode') {
                        const codePoints = [...input].map(c => c.codePointAt(0));
                        output = codePoints.map(c => c.toString(baseVal).toUpperCase()).join(' ');
                    } else { // decode
                        const codes = input.trim().split(/[\s,;]+/).map(s => parseInt(s, baseVal)).filter(n => !isNaN(n));
                        output = String.fromCodePoint(...codes);
                    }
                }
                ui.messageBox.textContent = '';
            } catch (e) {
                output = '';
                ui.messageBox.textContent = `Error: ${e.message}`;
                ui.messageBox.className = 'mt-4 text-center text-sm h-6 text-red-500';
            }
            
            ui.outputText.value = output;
            toggleActionButton(ui.copyButton, output.length > 0);
            toggleActionButton(ui.clearButton, input.length > 0);
        };
        
        const handleFile = (file) => {
            if (!file) return;
            const reader = new FileReader();
            const mode = document.querySelector('input[name="mode"]:checked').value;

            reader.onload = (e) => {
                let content = e.target.result;
                if (mode === 'base64' && content.includes(',')) {
                    content = content.split(',')[1];
                }
                ui.inputText.value = content;
                ui.fileInfo.textContent = `Loaded file: ${file.name} (${(file.size / 1024).toFixed(2)} KB)`;
                convert();
            };
            
            if (mode === 'base64') reader.readAsDataURL(file);
            else reader.readAsText(file);
        };
        
        const clearAll = () => {
            ui.inputText.value = '';
            ui.fileInfo.textContent = '';
            convert(); // This will clear output and update buttons
            ui.inputText.focus();
        };

        // Event Listeners
        ui.modeRadios.forEach(radio => radio.addEventListener('change', () => { renderOptions(radio.value); convert(); }));
        ui.inputText.addEventListener('input', convert);
        ui.clearButton.addEventListener('click', clearAll);
        
        ui.copyButton.addEventListener('click', () => {
            const textToCopy = ui.outputText.value;
            if (!textToCopy) return;

            const copySuccess = () => {
                const originalIcon = '<i data-lucide="copy" class="w-4 h-4 text-gray-500 dark:text-gray-400 transition-colors group-hover:text-tt-primary"></i>';
                ui.copyButton.innerHTML = '<i data-lucide="check" class="w-4 h-4 text-emerald-500"></i>';
                lucide.createIcons();
                setTimeout(() => {
                    ui.copyButton.innerHTML = originalIcon;
                    lucide.createIcons();
                }, 2000);
            };

            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(textToCopy)
                    .then(copySuccess)
                    .catch(err => console.error('Failed to copy with modern API: ', err));
            } else {
                const textArea = document.createElement("textarea");
                textArea.value = textToCopy;
                textArea.style.position = "absolute";
                textArea.style.left = "-9999px";
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    copySuccess();
                } catch (err) {
                    console.error('Fallback copy command failed: ', err);
                }
                document.body.removeChild(textArea);
            }
        });

        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eName => dropZone.addEventListener(eName, e => { e.preventDefault(); e.stopPropagation(); }, false));
        ['dragenter', 'dragover'].forEach(eName => dropZone.addEventListener(eName, () => dropZone.classList.add('border-tt-primary'), false));
        ['dragleave', 'drop'].forEach(eName => dropZone.addEventListener(eName, () => dropZone.classList.remove('border-tt-primary'), false));
        dropZone.addEventListener('drop', e => { handleFile(e.dataTransfer.files[0]); }, false);

        renderOptions('unicode');
        convert(); // Initial run to set button states
    });
    </script>
</body>
</html>