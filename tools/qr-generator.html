<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced QR Code Generator: Add Logo, Colors, and vCard | toolsTree</title>
    <meta name="description" content="The ultimate free QR code generator. Create high-resolution, custom QR codes with your logo. Supports URL, vCard, Wi-Fi, Text, Email, and more. Download as PNG or JPEG.">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N1KEVGM2VP"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-N1KEVGM2VP');
    </script>
    <script>
        (function() {
        try {
            const theme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            // Apply 'dark' class if saved theme is 'dark' OR if there's no saved theme and OS prefers dark.
            if (theme === 'dark' || (!theme && prefersDark)) {
            document.documentElement.classList.add('dark');
            } else {
            document.documentElement.classList.remove('dark');
            }
        } catch (e) {
            // Failsafe: default to light mode if any errors occur.
            console.error("Error applying initial theme:", e);
            document.documentElement.classList.remove('dark');
        }
        })();
    </script>
    <link rel="canonical" href="https://toolstree.netlify.app/tools/qr-generator.html">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;600&display=swap" rel="stylesheet">
    <script>
        window.GLOBAL_ROOT_PATH = '../';
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: { 'tt-primary': '#10b981', 'tt-secondary': '#4f46e5' },
                    fontFamily: { sans: ['Roboto Mono', 'monospace'] }
                }
            }
        };
    </script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>
    <style>
        :root { --tt-primary-stroke: #10b981; }
        .stroke-tt-primary { stroke: var(--tt-primary-stroke); }
        .dark input, .dark select, .dark textarea { background-color: #374151; border-color: #4b5563; color: #f3f4f6; }
        #qrcode img { max-width: 100%; height: auto; object-fit: contain; }
    </style>
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "SoftwareApplication",
            "name": "Advanced QR Code Generator with Logo",
            "applicationCategory": "UtilitiesApplication",
            "operatingSystem": "Web",
            "description": "Generate custom QR codes with logos, colors, and multiple data types like URL, vCard, and Wi-Fi.",
            "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
            "aggregateRating": { "@type": "AggregateRating", "ratingValue": "4.9", "reviewCount": "1124" },
            "publisher": { "@type": "Organization", "name": "toolsTree" }
            }
    </script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 transition-colors duration-300">

    <main class="max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 flex-grow w-full">
        <nav class="flex mb-6" aria-label="Breadcrumb">
            <ol class="inline-flex items-center space-x-1 md:space-x-3 text-sm">
                <li class="inline-flex items-center"><a href="../index.html" class="hover:text-tt-primary"><i data-lucide="home" class="w-4 h-4 mr-2 inline"></i>Home</a></li>
                <li><div class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 text-gray-400"></i><a href="../categories/misc.html" class="ml-1 hover:text-tt-primary md:ml-2">General Utility Tools</a></div></li>
                <li aria-current="page"><div class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 text-gray-400"></i><span class="ml-1 font-medium text-tt-primary md:ml-2">Advanced QR Code Generator</span></div></li>
            </ol>
        </nav>
        
        <section class="mb-10 text-center">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 dark:text-gray-100 mb-3">
                Advanced QR Code Generator
            </h1>
            <p class="text-base text-gray-600 dark:text-gray-300">
                Create high-resolution QR codes with your logo, custom colors, and multiple data types.
            </p>
        </section>

        <div class="bg-white dark:bg-gray-800 shadow-2xl rounded-xl p-6 sm:p-8 lg:p-10 border border-gray-100 dark:border-gray-700">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2 space-y-6">
                    <div>
                        <h2 class="text-xl font-bold mb-4 flex items-center"><i data-lucide="inbox" class="w-5 h-5 mr-2 stroke-tt-primary"></i>1. Enter Data</h2>
                        <select id="dataType" class="w-full p-3 border rounded-lg">
                            <option value="url">URL (Website Link)</option>
                            <option value="text">Plain Text</option>
                            <option value="vcard">vCard (Contact)</option>
                            <option value="email">Email</option>
                            <option value="sms">SMS</option>
                            <option value="wifi">Wi-Fi</option>
                            <option value="geo">Geolocation</option>
                        </select>
                        <div id="dataInputContainer" class="space-y-4 mt-4"></div>
                    </div>
                    
                    <div class="pt-6 border-t dark:border-gray-700">
                        <h2 class="text-xl font-bold mb-4 flex items-center"><i data-lucide="palette" class="w-5 h-5 mr-2 stroke-tt-primary"></i>2. Customize Design</h2>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label for="qrForegroundColor" class="block text-sm font-medium mb-1">Foreground Color</label>
                                <div class="flex"><input id="qrForegroundColor" type="color" value="#000000" class="w-12 h-12 p-1 border rounded-l-lg"><input type="text" id="qrForegroundColorText" value="#000000" class="flex-grow p-3 border rounded-r-lg border-l-0"></div>
                            </div>
                             <div>
                                <label for="qrErrorCorrection" class="block text-sm font-medium mb-1">Error Correction</label>
                                <select id="qrErrorCorrection" class="w-full p-3 border rounded-lg">
                                    <option value="L">Low (~7%)</option>
                                    <option value="M" selected>Medium (~15%)</option>
                                    <option value="Q">Quartile (~25%)</option>
                                    <option value="H">High (~30%)</option>
                                </select>
                            </div>
                            <div class="sm:col-span-2 pt-4 border-t dark:border-gray-700">
                                <label for="logo" class="block text-sm font-medium mb-1">Upload Logo (Optional)</label>
                                <input type="file" id="logo" accept="image/png, image/jpeg, image/svg+xml" class="w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-tt-primary/10 file:text-tt-primary hover:file:bg-tt-primary/20">
                                <button id="clearLogoBtn" class="text-xs text-red-500 hover:underline mt-1 hidden">Remove Logo</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="lg:sticky lg:top-24 h-fit space-y-6">
                    <h2 class="text-xl font-bold text-center flex items-center justify-center"><i data-lucide="scan" class="w-5 h-5 mr-2 stroke-tt-primary"></i>3. Your QR Code</h2>
                    <div class="bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg border dark:border-gray-700 flex justify-center items-center w-full aspect-square">
                        <div id="qrcode"><p class="text-sm text-center text-gray-500 dark:text-gray-400">Your QR code will appear here.</p></div>
                    </div>
                    <div id="downloadButtons" class="space-y-3 opacity-50 pointer-events-none">
                        <button id="downloadPNG" class="w-full flex items-center justify-center gap-2 bg-tt-primary text-white font-semibold py-3 rounded-lg"><i data-lucide="download" class="w-4 h-4"></i>Download PNG</button>
                        <button id="downloadJPEG" class="w-full flex items-center justify-center gap-2 bg-tt-secondary text-white font-semibold py-3 rounded-lg"><i data-lucide="download" class="w-4 h-4"></i>Download JPEG</button>
                    </div>
                </div>
            </div>
        </div>
        
        <section class="mt-8 bg-white p-6 rounded-xl shadow-lg dark:bg-gray-800 border border-gray-100 dark:border-gray-700 space-y-6">
            <div>
                <h2 class="text-2xl font-bold mb-3 text-gray-900 border-b pb-2 dark:text-gray-100 dark:border-gray-700">Why Use toolsTree Advanced QR Code Generator?</h2>
                <ul class="list-disc list-inside text-sm text-gray-600 space-y-2 ml-4 dark:text-gray-300">
                    <li><strong>Add Your Logo:</strong> Increase brand recognition and scan rates by embedding your logo directly into the QR code.</li>
                    <li><strong>Multiple Data Types:</strong> Go beyond simple links. Create codes for Wi-Fi access, vCard contact details, pre-filled emails, and more.</li>
                    <li><strong>Custom Design:</strong> Match your brand's aesthetic by changing the QR code's color.</li>
                    <li><strong>High Error Correction:</strong> When adding a logo, using a high error correction level (Q or H) ensures your code remains scannable even though the logo covers part of it.</li>
                </ul>
            </div>
            <div>
                <h2 class="text-2xl font-bold mb-3 text-gray-900 border-b pb-2 dark:text-gray-100 dark:border-gray-700">Frequently Asked Questions</h2>
                <div class="space-y-3 text-sm">
                    <details class="group">
                        <summary class="flex justify-between items-center font-medium cursor-pointer p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                            <span>How does adding a logo not break the QR code?</span><span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span>
                        </summary>
                        <p class="text-gray-600 mt-2 p-2 dark:text-gray-300">QR codes have built-in error correction. By setting the level to 'High (H)', up to 30% of the code can be damaged or obscured (in this case, by your logo) and it will still be perfectly scannable. We recommend using at least 'Q' level when adding a logo.</p>
                    </details>
                    <details class="group">
                        <summary class="flex justify-between items-center font-medium cursor-pointer p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                            <span>What is a vCard QR Code?</span><span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span>
                        </summary>
                        <p class="text-gray-600 mt-2 p-2 dark:text-gray-300">A vCard (Virtual Contact Card) QR code stores contact information. When someone scans it, their phone will prompt them to save your details (name, phone, email, website, etc.) directly to their contacts, making it perfect for digital business cards.</p>
                    </details>
                </div>
            </div>
        </section>
    </main>
    
    <script src="../javascript/globals.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        window.injectLayout(false);

        let qrInstance = null;
        let logoFile = null;

        const ui = {
            dataType: document.getElementById('dataType'),
            dataInputContainer: document.getElementById('dataInputContainer'),
            fgColor: document.getElementById('qrForegroundColor'),
            fgColorText: document.getElementById('qrForegroundColorText'),
            errorCorrection: document.getElementById('qrErrorCorrection'),
            logoInput: document.getElementById('logo'),
            clearLogoBtn: document.getElementById('clearLogoBtn'),
            qrcodeDiv: document.getElementById('qrcode'),
            downloadButtons: document.getElementById('downloadButtons'),
            downloadPNG: document.getElementById('downloadPNG'),
            downloadJPEG: document.getElementById('downloadJPEG'),
        };

        const generateDataString = () => {
            const type = ui.dataType.value;
            const getVal = (id) => ui.dataInputContainer.querySelector(`#${id}`).value;
            switch (type) {
                case 'url': return getVal('urlInput');
                case 'text': return getVal('textInput');
                case 'email': return `mailto:${getVal('emailAddress')}?subject=${encodeURIComponent(getVal('emailSubject'))}&body=${encodeURIComponent(getVal('emailBody'))}`;
                case 'sms': return `smsto:${getVal('smsNumber')}:${encodeURIComponent(getVal('smsMessage'))}`;
                case 'wifi': return `WIFI:T:${getVal('wifiEncryption')};S:${getVal('wifiSsid')};P:${getVal('wifiPassword')};${ui.dataInputContainer.querySelector('#wifiHidden').checked ? 'H:true;' : ''};`;
                case 'geo': return `geo:${getVal('latitude')},${getVal('longitude')}`;
                case 'vcard':
                    return `BEGIN:VCARD\nVERSION:3.0\nN:${getVal('vcardLastName')};${getVal('vcardFirstName')}\nFN:${getVal('vcardFirstName')} ${getVal('vcardLastName')}\nORG:${getVal('vcardOrg')}\nTITLE:${getVal('vcardTitle')}\nTEL;TYPE=WORK,VOICE:${getVal('vcardPhone')}\nEMAIL:${getVal('vcardEmail')}\nURL:${getVal('vcardWebsite')}\nEND:VCARD`;
                default: return '';
            }
        };
        
        const updateInputFields = () => {
            const type = ui.dataType.value;
            let html = '';
            const inputClass = "w-full p-3 border rounded-lg";
            const labelClass = "block text-sm font-medium mb-1";
            switch (type) {
                case 'url': html = `<label for="urlInput" class="${labelClass}">URL</label><input id="urlInput" type="url" placeholder="https://example.com" class="${inputClass}">`; break;
                case 'text': html = `<label for="textInput" class="${labelClass}">Text</label><textarea id="textInput" rows="4" placeholder="Enter your text" class="${inputClass}"></textarea>`; break;
                case 'email': html = `<label for="emailAddress" class="${labelClass}">Email</label><input id="emailAddress" type="email" class="${inputClass}" placeholder="recipient@example.com"><label for="emailSubject" class="${labelClass} mt-2">Subject</label><input id="emailSubject" type="text" class="${inputClass}" placeholder="Email Subject"><label for="emailBody" class="${labelClass} mt-2">Body</label><textarea id="emailBody" rows="2" class="${inputClass}" placeholder="Email Body"></textarea>`; break;
                case 'vcard': html = `<div class="grid grid-cols-2 gap-4"><div class="col-span-2 sm:col-span-1"><label for="vcardFirstName" class="${labelClass}">First Name</label><input id="vcardFirstName" type="text" class="${inputClass}" placeholder="John"></div><div class="col-span-2 sm:col-span-1"><label for="vcardLastName" class="${labelClass}">Last Name</label><input id="vcardLastName" type="text" class="${inputClass}" placeholder="Doe"></div></div><label for="vcardPhone" class="${labelClass} mt-2">Phone</label><input id="vcardPhone" type="tel" class="${inputClass}" placeholder="+1-202-555-0149"><label for="vcardEmail" class="${labelClass} mt-2">Email</label><input id="vcardEmail" type="email" class="${inputClass}" placeholder="john.doe@email.com"><label for="vcardOrg" class="${labelClass} mt-2">Organization</label><input id="vcardOrg" type="text" class="${inputClass}" placeholder="ACME Inc."><label for="vcardTitle" class="${labelClass} mt-2">Title</label><input id="vcardTitle" type="text" class="${inputClass}" placeholder="Manager"><label for="vcardWebsite" class="${labelClass} mt-2">Website</label><input id="vcardWebsite" type="url" class="${inputClass}" placeholder="https://www.acme.com">`; break;
                case 'sms': html = `<label for="smsNumber" class="${labelClass}">Phone Number</label><input id="smsNumber" type="tel" class="${inputClass}" placeholder="+1-202-555-0149"><label for="smsMessage" class="${labelClass} mt-2">Message</label><textarea id="smsMessage" rows="2" class="${inputClass}"></textarea>`; break;
                case 'wifi': html = `<label for="wifiSsid" class="${labelClass}">Network Name (SSID)</label><input id="wifiSsid" type="text" class="${inputClass}" placeholder="MyWiFi"><label for="wifiPassword" class="${labelClass} mt-2">Password</label><input id="wifiPassword" type="text" class="${inputClass}" placeholder="MyPassword"><div class="grid grid-cols-2 gap-4 mt-2"><div><label for="wifiEncryption" class="${labelClass}">Encryption</label><select id="wifiEncryption" class="${inputClass}"><option value="WPA">WPA/WPA2</option><option value="WEP">WEP</option><option value="nopass">None</option></select></div><div class="flex items-end pb-2"><input id="wifiHidden" type="checkbox" class="w-4 h-4 rounded text-tt-primary focus:ring-tt-primary"><label for="wifiHidden" class="ml-2 text-sm font-medium">Network is Hidden</label></div></div>`; break;
                case 'geo': html = `<div class="grid grid-cols-2 gap-4"><div><label for="latitude" class="${labelClass}">Latitude</label><input id="latitude" type="text" class="${inputClass}" placeholder="40.7128"></div><div><label for="longitude" class="${labelClass}">Longitude</label><input id="longitude" type="text" class="${inputClass}" placeholder="-74.0060"></div></div>`; break;
            }
            ui.dataInputContainer.innerHTML = html;
            ui.dataInputContainer.querySelectorAll('input, textarea, select').forEach(el => el.addEventListener('input', drawQrCode));
        };

        const drawQrCode = () => {
            const data = generateDataString();
            if (!data) {
                ui.qrcodeDiv.innerHTML = '<p class="text-sm text-center text-gray-500 dark:text-gray-400">Enter data to generate a QR code.</p>';
                ui.downloadButtons.classList.add('opacity-50', 'pointer-events-none');
                return;
            }

            ui.qrcodeDiv.innerHTML = '';
            const size = 256; // Use a fixed internal size for generation
            
            const tempDiv = document.createElement('div');
            new QRCode(tempDiv, {
                text: data, width: size, height: size,
                colorDark: ui.fgColor.value, colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel[ui.errorCorrection.value]
            });

            setTimeout(() => {
                const canvas = tempDiv.querySelector('canvas');
                if (!canvas) return;

                const ctx = canvas.getContext('2d');
                if (logoFile) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const logoImg = new Image();
                        logoImg.onload = () => {
                            const logoSize = canvas.width * 0.25; // Logo is 25% of QR code size
                            const logoX = (canvas.width - logoSize) / 2;
                            const logoY = (canvas.height - logoSize) / 2;
                            ctx.fillStyle = 'white';
                            ctx.fillRect(logoX - 5, logoY - 5, logoSize + 10, logoSize + 10); // Add a white padding border
                            ctx.drawImage(logoImg, logoX, logoY, logoSize, logoSize);
                            displayFinalImage(canvas);
                        };
                        logoImg.src = e.target.result;
                    };
                    reader.readAsDataURL(logoFile);
                } else {
                    displayFinalImage(canvas);
                }
            }, 50); // Small timeout to ensure canvas is drawn
        };
        
        const displayFinalImage = (canvas) => {
            const img = new Image();
            img.src = canvas.toDataURL();
            ui.qrcodeDiv.innerHTML = '';
            ui.qrcodeDiv.appendChild(img);
            ui.downloadButtons.classList.remove('opacity-50', 'pointer-events-none');
        };

        const download = (format) => {
            const img = ui.qrcodeDiv.querySelector('img');
            if (!img) return;

            if (format === 'jpeg') {
                const canvas = document.createElement('canvas');
                canvas.width = img.width;
                canvas.height = img.height;
                const ctx = canvas.getContext('2d');
                ctx.fillStyle = '#FFFFFF';
                ctx.fillRect(0,0,canvas.width, canvas.height);
                ctx.drawImage(img, 0, 0);
                const link = document.createElement('a');
                link.download = `toolstree-qrcode.jpeg`;
                link.href = canvas.toDataURL('image/jpeg', 0.9);
                link.click();
            } else { // PNG
                const link = document.createElement('a');
                link.download = `toolstree-qrcode.png`;
                link.href = img.src;
                link.click();
            }
        };

        // Event Listeners
        ui.dataType.addEventListener('change', updateInputFields);
        ui.fgColor.addEventListener('input', () => { ui.fgColorText.value = ui.fgColor.value; drawQrCode(); });
        ui.fgColorText.addEventListener('input', () => { ui.fgColor.value = ui.fgColorText.value; drawQrCode(); });
        ui.errorCorrection.addEventListener('change', drawQrCode);
        ui.logoInput.addEventListener('change', (e) => {
            logoFile = e.target.files[0];
            ui.clearLogoBtn.style.display = logoFile ? 'inline' : 'none';
            drawQrCode();
        });
        ui.clearLogoBtn.addEventListener('click', () => {
            logoFile = null;
            ui.logoInput.value = '';
            ui.clearLogoBtn.style.display = 'none';
            drawQrCode();
        });
        ui.downloadPNG.addEventListener('click', () => download('png'));
        ui.downloadJPEG.addEventListener('click', () => download('jpeg'));
        new MutationObserver(drawQrCode).observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });

        // Initial Setup
        updateInputFields();
    });
    </script>
</body>
</html>