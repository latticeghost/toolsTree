<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script>
        (function() {
        try {
            const theme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            // Apply 'dark' class if saved theme is 'dark' OR if there's no saved theme and OS prefers dark.
            if (theme === 'dark' || (!theme && prefersDark)) {
            document.documentElement.classList.add('dark');
            } else {
            document.documentElement.classList.remove('dark');
            }
        } catch (e) {
            // Failsafe: default to light mode if any errors occur.
            console.error("Error applying initial theme:", e);
            document.documentElement.classList.remove('dark');
        }
        })();
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Advanced Retirement Calculator: Plan Corpus, Inflation & Income | toolsTree</title>
    <meta name="description" content="The most advanced retirement calculator. Forecast your total corpus by factoring in existing savings, annual saving increases, inflation, and post-retirement needs.">
    <link rel="canonical" href="https://toolstree.netlify.app/tools/retirement-calculator.html">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;600&display=swap" rel="stylesheet">
    <script>
        window.GLOBAL_ROOT_PATH = '../';

        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: { 'tt-primary': '#10b981', 'tt-secondary': '#4f46e5' },
                    fontFamily: { sans: ['Roboto Mono', 'monospace'] }
                }
            }
        };
    </script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root { --tt-primary-stroke: #10b981; }
        .stroke-tt-primary { stroke: var(--tt-primary-stroke); }
        .dark input, .dark select { background-color: #374151; border-color: #4b5563; color: #f3f4f6; }
        .chart-container { height: 320px; }
    </style>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Advanced Retirement Calculator",
      "applicationCategory": "FinanceApplication",
      "operatingSystem": "Web",
      "description": "Forecast retirement corpus with advanced inputs for existing savings, annual contribution growth, inflation, and post-retirement distribution.",
      "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
      "aggregateRating": { "@type": "AggregateRating", "ratingValue": "4.9", "reviewCount": "781" },
      "publisher": { "@type": "Organization", "name": "toolsTree" }
    }
    </script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 transition-colors duration-300">

    <main class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 flex-grow w-full">

        <nav class="flex mb-6" aria-label="Breadcrumb">
            <ol class="inline-flex items-center space-x-1 md:space-x-3 text-sm">
                <li class="inline-flex items-center"><a href="../index.html" class="hover:text-tt-primary"><i data-lucide="home" class="w-4 h-4 mr-2 inline"></i>Home</a></li>
                <li><div class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 text-gray-400"></i><a href="../categories/finance.html" class="ml-1 hover:text-tt-primary md:ml-2">Finance & Money Tools</a></div></li>
                <li aria-current="page"><div class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 text-gray-400"></i><span class="ml-1 font-medium text-tt-primary md:ml-2">Advanced Retirement Calculator</span></div></li>
            </ol>
        </nav>
        
        <section class="mb-10 text-center">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 dark:text-gray-100 mb-3">
                Advanced Retirement Calculator
            </h1>
            <p class="text-base text-gray-600 dark:text-gray-300">
                A comprehensive tool to forecast your financial future with realistic growth and inflation models.
            </p>
        </section>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div class="bg-white dark:bg-gray-800 shadow-2xl rounded-xl p-6 sm:p-8 border border-gray-100 dark:border-gray-700 space-y-6">
                <div>
                    <h2 class="text-xl font-bold flex items-center mb-4"><i data-lucide="user" class="w-5 h-5 mr-2 stroke-tt-primary"></i>About You</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label for="currentAge" class="block text-sm font-medium mb-1">Current Age</label>
                            <input id="currentAge" type="number" placeholder="e.g., 30" class="w-full p-3 border rounded-lg">
                        </div>
                        <div>
                            <label for="retirementAge" class="block text-sm font-medium mb-1">Retirement Age</label>
                            <input id="retirementAge" type="number" placeholder="e.g., 60" class="w-full p-3 border rounded-lg">
                        </div>
                    </div>
                </div>

                <div class="pt-4 border-t dark:border-gray-700">
                    <h2 class="text-xl font-bold flex items-center mb-4"><i data-lucide="piggy-bank" class="w-5 h-5 mr-2 stroke-tt-primary"></i>Your Savings Plan</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                           <label for="currentCorpus" class="block text-sm font-medium mb-1">Current Retirement Savings</label>
                           <div class="flex">
                               <select id="currencySymbol" class="p-3 border rounded-l-lg bg-gray-100"><option value="₹">₹</option><option value="$">$</option><option value="£">£</option><option value="€">€</option></select>
                               <input id="currentCorpus" type="number" placeholder="e.g., 500000" class="flex-grow p-3 border rounded-r-lg">
                           </div>
                        </div>
                        <div>
                            <label for="monthlySavings" class="block text-sm font-medium mb-1">Monthly Savings</label>
                            <input id="monthlySavings" type="number" placeholder="e.g., 25000" class="w-full p-3 border rounded-lg">
                        </div>
                    </div>
                     <div class="mt-4">
                        <label for="savingsIncrease" class="block text-sm font-medium mb-1">Annual Savings Increase (%)</label>
                        <input id="savingsIncrease" type="number" placeholder="e.g., 5" class="w-full p-3 border rounded-lg">
                    </div>
                </div>

                <div class="pt-4 border-t dark:border-gray-700">
                    <h2 class="text-xl font-bold flex items-center mb-4"><i data-lucide="activity" class="w-5 h-5 mr-2 stroke-tt-primary"></i>Market Assumptions</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label for="expectedReturn" class="block text-sm font-medium mb-1">Return Rate (p.a. %)</label>
                            <input id="expectedReturn" type="number" placeholder="e.g., 12" class="w-full p-3 border rounded-lg">
                        </div>
                        <div>
                            <label for="inflation" class="block text-sm font-medium mb-1">Inflation Rate (p.a. %)</label>
                            <input id="inflation" type="number" placeholder="e.g., 6" class="w-full p-3 border rounded-lg">
                        </div>
                    </div>
                </div>
                
                <div class="pt-4 border-t dark:border-gray-700">
                    <h2 class="text-xl font-bold flex items-center mb-4"><i data-lucide="sunset" class="w-5 h-5 mr-2 stroke-tt-primary"></i>Post-Retirement</h2>
                     <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                           <label for="withdrawalYears" class="block text-sm font-medium mb-1">Years Corpus Must Last</label>
                           <input id="withdrawalYears" type="number" placeholder="e.g., 25" class="w-full p-3 border rounded-lg">
                        </div>
                        <div>
                            <label for="postRetirementReturn" class="block text-sm font-medium mb-1">Return Rate (p.a. %)</label>
                            <input id="postRetirementReturn" type="number" placeholder="e.g., 7" class="w-full p-3 border rounded-lg">
                        </div>
                    </div>
                </div>

                <div class="flex gap-4 pt-4">
                    <button id="calculateBtn" class="flex-grow flex items-center justify-center space-x-2 bg-tt-primary text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-tt-secondary transition">
                        <i data-lucide="calculator" class="w-5 h-5"></i><span>Calculate</span>
                    </button>
                    <button id="resetBtn" class="flex-shrink-0 w-24 flex items-center justify-center space-x-1 bg-gray-200 dark:bg-gray-600 font-semibold py-3 px-2 rounded-lg shadow-md hover:bg-gray-300 dark:hover:bg-gray-500 transition">
                        <i data-lucide="rotate-ccw" class="w-4 h-4"></i><span>Reset</span>
                    </button>
                </div>
            </div>

            <div class="space-y-8">
                <div id="result" class="bg-white dark:bg-gray-800 shadow-2xl rounded-xl p-6 border border-gray-100 dark:border-gray-700 text-center">
                    <p class="text-gray-500 dark:text-gray-400">Enter your details and click "Calculate".</p>
                </div>
                <div class="bg-white dark:bg-gray-800 shadow-2xl rounded-xl p-4 border border-gray-100 dark:border-gray-700 chart-container">
                    <h3 class="text-lg font-semibold text-center mb-2">Investment Growth Timeline</h3>
                    <canvas id="retirementChart"></canvas>
                </div>
            </div>
        </div>
        
        <section class="mt-8 bg-white p-6 rounded-xl shadow-lg dark:bg-gray-800 border border-gray-100 dark:border-gray-700 space-y-6">
            <div>
                <h2 class="text-2xl font-bold mb-3 text-gray-900 border-b pb-2 dark:text-gray-100 dark:border-gray-700">How to Use the Retirement Calculator</h2>
                <ol class="list-decimal list-inside text-sm text-gray-600 space-y-2 dark:text-gray-300">
                    <li><strong>Enter Personal Details:</strong> Input your current age and your desired retirement age.</li>
                    <li><strong>Input Your Savings Plan:</strong> Provide your current retirement savings, your current monthly contribution, and the percentage by which you expect to increase your savings each year.</li>
                    <li><strong>Set Market Assumptions:</strong> Enter the expected annual return rate on your investments during your working years, and the average inflation rate you anticipate.</li>
                    <li><strong>Plan Post-Retirement:</strong> Specify how many years your savings need to last and the expected return rate on your corpus during retirement.</li>
                    <li><strong>Calculate:</strong> Click the "Calculate" button to see a detailed forecast of your financial future.</li>
                </ol>
            </div>
            
            <div>
                <h2 class="text-2xl font-bold mb-3 text-gray-900 border-b pb-2 dark:text-gray-100 dark:border-gray-700">Frequently Asked Questions (FAQ)</h2>
                <div class="space-y-3 text-sm">
                    <details class="group">
                        <summary class="flex justify-between items-center font-medium cursor-pointer list-none p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                            <span>Why is inflation so important for retirement planning?</span><span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span>
                        </summary>
                        <p class="text-gray-600 mt-2 p-2 dark:text-gray-300">Inflation erodes the purchasing power of money over time. A monthly expense of ₹50,000 today could require ₹2,00,000 or more to maintain the same lifestyle in 25-30 years. This calculator provides an "Inflation Adjusted Corpus"—the real value of your savings in today's money—so you can set realistic goals.</p>
                    </details>
                    <details class="group">
                        <summary class="flex justify-between items-center font-medium cursor-pointer list-none p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                            <span>How does the 'Annual Savings Increase' feature work?</span><span class="transition group-open:rotate-180"><i data-lucide="chevron-down" class="w-4 h-4"></i></span>
                        </summary>
                        <p class="text-gray-600 mt-2 p-2 dark:text-gray-300">This feature models the real-world scenario where your income and savings capacity grow over time. If you enter 5%, the calculator assumes that your monthly savings will increase by 5% at the end of each year, leading to a much more accurate and optimistic final corpus compared to a fixed savings model.</p>
                    </details>
                </div>
            </div>
        </section>
    </main>
    
    <script src="../javascript/globals.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            window.injectLayout(false); 
    
            let retirementChart;
            const ui = {
                inputs: ['currentAge', 'retirementAge', 'currentCorpus', 'monthlySavings', 'savingsIncrease', 'expectedReturn', 'inflation', 'withdrawalYears', 'postRetirementReturn'],
                getValues: function() {
                    const values = {};
                    this.inputs.forEach(id => { values[id] = parseFloat(document.getElementById(id).value) || 0; });
                    values.currencySymbol = document.getElementById('currencySymbol').value || '₹';
                    return values;
                }
            };

            const formatCurrency = (amount, symbol) => {
                const locale = (symbol === '₹') ? 'en-IN' : 'en-US'; 
                return `${symbol} ${new Intl.NumberFormat(locale, { maximumFractionDigits: 0 }).format(amount)}`;
            };

            const calculateRetirement = () => {
                const vals = ui.getValues();
                if (vals.retirementAge <= vals.currentAge || vals.monthlySavings <= 0) {
                    document.getElementById("result").innerHTML = "<p class='text-red-500'>Please enter valid ages and positive savings.</p>";
                    if(retirementChart) retirementChart.destroy();
                    return;
                }

                const yearsToRetire = vals.retirementAge - vals.currentAge;
                const monthlyReturn = vals.expectedReturn / 100 / 12;
                const annualSavingsIncrease = vals.savingsIncrease / 100;
                let totalContributions = vals.currentCorpus;
                let corpus = vals.currentCorpus;
                let currentMonthlySavings = vals.monthlySavings;
                const yearlyData = [];

                for (let year = 1; year <= yearsToRetire; year++) {
                    for (let month = 1; month <= 12; month++) {
                        corpus += currentMonthlySavings;
                        corpus *= (1 + monthlyReturn);
                    }
                    totalContributions += currentMonthlySavings * 12;
                    currentMonthlySavings *= (1 + annualSavingsIncrease);
                    yearlyData.push(corpus);
                }
                
                const totalInterest = corpus - totalContributions;
                const inflationAdjustedCorpus = corpus / Math.pow(1 + (vals.inflation / 100), yearsToRetire);
                const realPostRetirementReturn = ((1 + (vals.postRetirementReturn / 100)) / (1 + (vals.inflation / 100))) - 1;
                const monthlyRealReturn = realPostRetirementReturn / 12;
                const withdrawalMonths = vals.withdrawalYears * 12;
                
                let monthlyWithdrawal;
                if (monthlyRealReturn <= 0) {
                    monthlyWithdrawal = inflationAdjustedCorpus / withdrawalMonths;
                } else {
                    const factor = (monthlyRealReturn * Math.pow(1 + monthlyRealReturn, withdrawalMonths)) / (Math.pow(1 + monthlyRealReturn, withdrawalMonths) - 1);
                    monthlyWithdrawal = inflationAdjustedCorpus * factor;
                }

                document.getElementById("result").innerHTML = `
                    <div class="grid grid-cols-2 gap-4 text-left">
                        <div class="p-3 bg-gray-100 dark:bg-gray-700 rounded-lg">
                            <p class="text-sm text-gray-500 dark:text-gray-400">Final Corpus (at age ${vals.retirementAge})</p>
                            <p class="text-xl font-bold text-tt-secondary">${formatCurrency(corpus, vals.currencySymbol)}</p>
                        </div>
                        <div class="p-3 bg-gray-100 dark:bg-gray-700 rounded-lg">
                            <p class="text-sm text-gray-500 dark:text-gray-400">Value in Today's Money</p>
                            <p class="text-xl font-bold">${formatCurrency(inflationAdjustedCorpus, vals.currencySymbol)}</p>
                        </div>
                        <div class="p-3 bg-gray-100 dark:bg-gray-700 rounded-lg">
                            <p class="text-sm text-gray-500 dark:text-gray-400">Your Contributions</p>
                            <p class="text-xl font-bold">${formatCurrency(totalContributions, vals.currencySymbol)}</p>
                        </div>
                        <div class="p-3 bg-gray-100 dark:bg-gray-700 rounded-lg">
                            <p class="text-sm text-gray-500 dark:text-gray-400">Wealth Gained</p>
                            <p class="text-xl font-bold text-tt-primary">${formatCurrency(totalInterest, vals.currencySymbol)}</p>
                        </div>
                    </div>
                    <div class="mt-4 p-4 bg-tt-primary/10 dark:bg-tt-primary/20 rounded-lg">
                        <p class="text-sm text-gray-600 dark:text-gray-200">Sustainable Monthly Income (Today's Value)</p>
                        <p class="text-3xl font-extrabold text-gray-900 dark:text-gray-50">${formatCurrency(monthlyWithdrawal, vals.currencySymbol)}</p>
                    </div>
                `;
                updateChart(yearlyData, vals.currentAge, yearsToRetire, vals.currencySymbol);
            };

            const resetCalculator = () => {
                ui.inputs.forEach(id => document.getElementById(id).value = '');
                document.getElementById('result').innerHTML = '<p class="text-gray-500 dark:text-gray-400">Enter your details and click "Calculate".</p>';
                if (retirementChart) retirementChart.destroy();
            };
            
            const updateChart = (data, startAge, years, symbol) => {
                const ctx = document.getElementById("retirementChart").getContext("2d");
                if (retirementChart) retirementChart.destroy();
                const isDarkMode = document.documentElement.classList.contains('dark');
                const labels = Array.from({ length: years }, (_, i) => `${startAge + i + 1}`);

                retirementChart = new Chart(ctx, {
                    type: "line",
                    data: { labels, datasets: [{
                        label: `Corpus Value (${symbol})`, data, borderColor: "#10b981",
                        backgroundColor: "rgba(16, 185, 129, 0.1)", fill: true, tension: 0.4 }]
                    },
                    options: { responsive: true, maintainAspectRatio: false,
                        plugins: { legend: { labels: { color: isDarkMode ? '#d1d5db' : '#374151' } } },
                        scales: { 
                            y: { title: { display: true, text: `Value (${symbol})`, color: isDarkMode ? '#d1d5db' : '#374151' }, grid: { color: isDarkMode ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)' }, ticks: { color: isDarkMode ? '#d1d5db' : '#374151' } },
                            x: { title: { display: true, text: 'Age', color: isDarkMode ? '#d1d5db' : '#374151' }, grid: { color: isDarkMode ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)' }, ticks: { color: isDarkMode ? '#d1d5db' : '#374151' } }
                        }
                    }
                });
            };

            document.getElementById('calculateBtn').addEventListener('click', calculateRetirement);
            document.getElementById('resetBtn').addEventListener('click', resetCalculator);
            
            new MutationObserver(() => {
                if(retirementChart) {
                    calculateRetirement();
                }
            }).observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });

        });
    </script>
</body>
</html>